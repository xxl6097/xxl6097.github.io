{"title":"SSH公钥免密登录","uid":"65ce77b5983a73fa652d4b08c40f272d","slug":"ssh-pub-login","date":"2022-07-01T12:23:16.000Z","updated":"2022-10-31T13:56:54.024Z","comments":true,"path":"api/articles/ssh-pub-login.json","cover":null,"content":"<p>ssh连接使用公钥免密登录</p>\n<span id=\"more\"></span>\n\n<h2 id=\"1-制作公钥\"><a href=\"#1-制作公钥\" class=\"headerlink\" title=\"1. 制作公钥\"></a>1. 制作公钥</h2><h4 id=\"ed25519方式\"><a href=\"#ed25519方式\" class=\"headerlink\" title=\"ed25519方式\"></a>ed25519方式</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>root@VM-4-12-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># ssh-keygen -t ed25519 -C \"HongKong@uuxia.cn\"</span>\nGenerating public/private ed25519 key pair.\nEnter <span class=\"token function\">file</span> <span class=\"token keyword\">in</span> <span class=\"token function\">which</span> to save the key <span class=\"token punctuation\">(</span>/root/.ssh/id_ed25519<span class=\"token punctuation\">)</span>: \n/root/.ssh/id_ed25519 already exists.\nOverwrite <span class=\"token punctuation\">(</span>y/n<span class=\"token punctuation\">)</span>? y\nEnter passphrase <span class=\"token punctuation\">(</span>empty <span class=\"token keyword\">for</span> no passphrase<span class=\"token punctuation\">)</span>: \nEnter same passphrase again: \nYour identification has been saved <span class=\"token keyword\">in</span> /root/.ssh/id_ed25519.\nYour public key has been saved <span class=\"token keyword\">in</span> /root/.ssh/id_ed25519.pub.\nThe key fingerprint is:\nSHA256:WOaLsCD+PTOpbs3DvEdlA/k4lepSQ/uXklT5Cv4sb/E HongKong@uuxia.cn\nThe key's randomart image is:\n+--<span class=\"token punctuation\">[</span>ED25519 <span class=\"token number\">256</span><span class=\"token punctuation\">]</span>--+\n<span class=\"token operator\">|</span>        <span class=\"token builtin class-name\">.</span> <span class=\"token builtin class-name\">.</span> <span class=\"token builtin class-name\">.</span>    <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>       + o o     <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>      <span class=\"token builtin class-name\">.</span> X <span class=\"token builtin class-name\">.</span> <span class=\"token builtin class-name\">.</span>    <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>       % B   <span class=\"token builtin class-name\">.</span>   <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span><span class=\"token builtin class-name\">.</span> <span class=\"token builtin class-name\">.</span> <span class=\"token builtin class-name\">.</span> + S + o    <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span><span class=\"token punctuation\">..</span> <span class=\"token builtin class-name\">.</span> + + * <span class=\"token operator\">=</span>     <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token builtin class-name\">.</span>  * <span class=\"token operator\">=</span> <span class=\"token builtin class-name\">.</span> <span class=\"token operator\">=</span> o    <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  <span class=\"token punctuation\">..</span>.@ <span class=\"token builtin class-name\">.</span> <span class=\"token builtin class-name\">.</span> + E   <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  o+.oB   +.     <span class=\"token operator\">|</span>\n+----<span class=\"token punctuation\">[</span>SHA256<span class=\"token punctuation\">]</span>-----+<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h4 id=\"rsa方式\"><a href=\"#rsa方式\" class=\"headerlink\" title=\"rsa方式\"></a>rsa方式</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">ssh-keygen -t rsa -C <span class=\"token string\">\"HongKong@uuxia.cn\"</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n\n<h2 id=\"2-安装公钥\"><a href=\"#2-安装公钥\" class=\"headerlink\" title=\"2. 安装公钥\"></a>2. 安装公钥</h2><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>root@VM-4-12-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat ~/.ssh/id_ed25519.pub &gt; ~/.ssh/authorized_keys</span>\n<span class=\"token punctuation\">[</span>root@VM-4-12-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># chmod 600 ~/.ssh/authorized_keys </span>\n<span class=\"token punctuation\">[</span>root@VM-4-12-centos ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># chmod 700 ~/.ssh/</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"3-修改SSH配置\"><a href=\"#3-修改SSH配置\" class=\"headerlink\" title=\"3. 修改SSH配置\"></a>3. 修改SSH配置</h2><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/ssh/sshd_config\n\n\nPubkeyAuthentication <span class=\"token function\">yes</span>\n\n禁用ssh密码登录,可以不禁用\nPasswordAuthentication no\n\n<span class=\"token function\">sudo</span> <span class=\"token function\">service</span> sshd restart\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n\n<pre class=\"line-numbers language-id_ed25519_hetpi4s\" data-language=\"id_ed25519_hetpi4s\"><code class=\"language-id_ed25519_hetpi4s\">-----BEGIN OPENSSH PRIVATE KEY-----\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAAAMwAAAAtzc2gtZW\nQyNTUxOQAAACBFXprOqGFkUMg3AJAlTEQQVCVbt+BTxDB1C5A+JMXQsgAAAJiA8NffgPDX\n3wAAAAtzc2gtZWQyNTUxOQAAACBFXprOqGFkUMg3AJAlTEQQVCVbt+BTxDB1C5A+JMXQsg\nAAAECeFUhNhKurVgYkIXYKhwZ4Y09bXs8Sln0WlTtY7+JYdUVems6oYWRQyDcAkCVMRBBU\nJVu34FPEMHULkD4kxdCyAAAAD2hldHBpNEB1dXhpYS5jbgECAwQFBg==\n-----END OPENSSH PRIVATE KEY-----\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n\n<pre class=\"line-numbers language-id_ed25519_homepi4s\" data-language=\"id_ed25519_homepi4s\"><code class=\"language-id_ed25519_homepi4s\">-----BEGIN OPENSSH PRIVATE KEY-----\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAAAMwAAAAtzc2gtZW\nQyNTUxOQAAACBi+wXwnH9fh0lebu9JzDG2hBoWEjueIGbnt+hvjnat3AAAAJi4l4PmuJeD\n5gAAAAtzc2gtZWQyNTUxOQAAACBi+wXwnH9fh0lebu9JzDG2hBoWEjueIGbnt+hvjnat3A\nAAAEBCPjafbpoYxx0iWNFSL0A3CHtSgmmDV/+Y46SAclqv9GL7BfCcf1+HSV5u70nMMbaE\nGhYSO54gZue36G+Odq3cAAAAEWhvbWVwaTRzQHV1eGlhLmNuAQIDBA==\n-----END OPENSSH PRIVATE KEY-----<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<pre class=\"line-numbers language-uuxia.cn\" data-language=\"uuxia.cn\"><code class=\"language-uuxia.cn\">-----BEGIN OPENSSH PRIVATE KEY-----\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAAAMwAAAAtzc2gtZW\nQyNTUxOQAAACA8+LMAD9OzOFpu48I7k/J8PFQSPUxAl0V3O7yK0me2tAAAAJiG5lCFhuZQ\nhQAAAAtzc2gtZWQyNTUxOQAAACA8+LMAD9OzOFpu48I7k/J8PFQSPUxAl0V3O7yK0me2tA\nAAAEAADBNvYO8owdd0Nd1Jj1h5zB8SjP8LWex7fBVnwMgA1Tz4swAP07M4Wm7jwjuT8nw8\nVBI9TECXRXc7vIrSZ7a0AAAAEHRlbmNlbnRAdXV4aWEuY24BAgMEBQ==\n-----END OPENSSH PRIVATE KEY-----<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<pre class=\"line-numbers language-HongKong\" data-language=\"HongKong\"><code class=\"language-HongKong\">-----BEGIN OPENSSH PRIVATE KEY-----\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAAAMwAAAAtzc2gtZW\nQyNTUxOQAAACBYr18zgN38cTW9Mohlyui72GjQbVwuHCfcMGlyiWqJQwAAAJhTAryrUwK8\nqwAAAAtzc2gtZWQyNTUxOQAAACBYr18zgN38cTW9Mohlyui72GjQbVwuHCfcMGlyiWqJQw\nAAAEDDLLNd7gQEYDoWS5d9iCWL5nV/93X8aAB0JX73PJKwblivXzOA3fxxNb0yiGXK6LvY\naNBtXC4cJ9wwaXKJaolDAAAAEUhvbmdLb25nQHV1eGlhLmNuAQIDBA==\n-----END OPENSSH PRIVATE KEY-----<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><a href=\"id_ed25519_hetpi4s\" title=\"公司树莓派4B+\">id_ed25519_hetpi4s</a></p>\n<p><a href=\"id_ed25519_homepi4s\" title=\"HOME树莓派4B+\">id_ed25519_homepi4s</a></p>\n<p><a href=\"id_ed25519_uuxia.cn\" title=\"uuxia.cn\">uuxia.cn</a></p>\n<p><a href=\"id_ed25519_hk\" title=\"HongKong\">HongKong</a></p>\n<p>光猫登陆：<br>192.168.3.1<br>root/adminHW</p>\n<p>宽带账户:202107592177，密码:096016</p>\n","text":"ssh连接使用公钥免密登录 1. 制作公钥ed25519方式[root@VM-4-12-centos ~]# ssh-keygen -t ed25519 -C \"HongKong@uuxia.cn\" Generating public/private ed25519 key pa...","link":"","photos":[],"count_time":{"symbolsCount":"3k","symbolsTime":"3 mins."},"categories":[{"name":"ssh","slug":"ssh","count":1,"path":"api/categories/ssh.json"}],"tags":[{"name":"ssh","slug":"ssh","count":1,"path":"api/tags/ssh.json"},{"name":"pubkey","slug":"pubkey","count":1,"path":"api/tags/pubkey.json"},{"name":"shell","slug":"shell","count":1,"path":"api/tags/shell.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-%E5%88%B6%E4%BD%9C%E5%85%AC%E9%92%A5\"><span class=\"toc-text\">1. 制作公钥</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#ed25519%E6%96%B9%E5%BC%8F\"><span class=\"toc-text\">ed25519方式</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#rsa%E6%96%B9%E5%BC%8F\"><span class=\"toc-text\">rsa方式</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-%E5%AE%89%E8%A3%85%E5%85%AC%E9%92%A5\"><span class=\"toc-text\">2. 安装公钥</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#3-%E4%BF%AE%E6%94%B9SSH%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">3. 修改SSH配置</span></a></li></ol>","author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"一位正在重塑知识的技术人 <br /> @ <b>公众号：技术银河</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"IoT接入文档","uid":"2de4bfcb70b5f8e779a2abe056882166","slug":"iot-used","date":"2022-07-19T11:42:09.000Z","updated":"2022-07-19T11:43:17.391Z","comments":true,"path":"api/articles/iot-used.json","cover":null,"text":"4.3 设备与平台通信接口4.3.1 注册接口描述：设备上电联网后，检测本地是没有登录信息和注册标志，设备需要到平台进行注册激活，注册地址固定 URL，且分为测试和正式服务器地址（域名或 IP、端口）。正式服务器地址（OPENHOST）：open.clife.cn测试服务器地址（...","link":"","photos":[],"count_time":{"symbolsCount":"6.5k","symbolsTime":"6 mins."},"categories":[{"name":"IoT","slug":"IoT","count":4,"path":"api/categories/IoT.json"},{"name":"mqtt","slug":"mqtt","count":1,"path":"api/categories/mqtt.json"}],"tags":[{"name":"Iot","slug":"Iot","count":1,"path":"api/tags/Iot.json"},{"name":"mqtt","slug":"mqtt","count":1,"path":"api/tags/mqtt.json"},{"name":"c++","slug":"c","count":1,"path":"api/tags/c.json"}],"author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"一位正在重塑知识的技术人 <br /> @ <b>公众号：技术银河</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"ADB保存Android日志","uid":"9d20369044989ae464d8837e2ee90b3a","slug":"logcat","date":"2022-06-16T03:05:12.000Z","updated":"2022-06-16T03:10:06.453Z","comments":true,"path":"api/articles/logcat.json","cover":null,"text":"Macos、Windows、linux下如何使用adb保存android手机的日志 一、MacOsX、Linux下使用adb保存Android日志adb logcat -c &amp;&amp; adb logcat -v time | grep \"abss\" &gt; /Use...","link":"","photos":[],"count_time":{"symbolsCount":276,"symbolsTime":"1 mins."},"categories":[{"name":"android","slug":"android","count":1,"path":"api/categories/android.json"},{"name":"logcat","slug":"logcat","count":1,"path":"api/categories/logcat.json"}],"tags":[{"name":"android","slug":"android","count":4,"path":"api/tags/android.json"},{"name":"logcat","slug":"logcat","count":1,"path":"api/tags/logcat.json"},{"name":"adb","slug":"adb","count":1,"path":"api/tags/adb.json"}],"author":{"name":"Aurora","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"一位正在重塑知识的技术人 <br /> @ <b>公众号：技术银河</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}