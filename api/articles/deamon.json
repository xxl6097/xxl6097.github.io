{"title":"Android孤儿进程防止清理","uid":"7ab620140aa4aa61971d8467ecefd182","slug":"deamon","date":"2016-05-08T17:47:57.000Z","updated":"2022-02-18T10:17:37.000Z","comments":true,"path":"api/articles/deamon.json","cover":null,"content":"<p>孤儿进程:因为父进程先退出而导致一个子进程被init进程收养的进程为孤儿进程</p>\n<span id=\"more\"></span>\n<h2 id=\"孤儿进程-因为父进程先退出而导致一个子进程被init进程收养的进程为孤儿进程。\"><a href=\"#孤儿进程-因为父进程先退出而导致一个子进程被init进程收养的进程为孤儿进程。\" class=\"headerlink\" title=\"孤儿进程:因为父进程先退出而导致一个子进程被init进程收养的进程为孤儿进程。\"></a>孤儿进程:因为父进程先退出而导致一个子进程被init进程收养的进程为孤儿进程。</h2><p>因此，可以通过创建孤儿进程，改变native进程的父进程，达到防止系统清理。</p>\n<p>关键代码实现:</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\nint main()\n{\n   pid_t child_pid;\n   child_pid=fork();\n   if(child_pid&lt;0)\n   {\n     perror(\"fork error\");\n     exit(EXIT_FAILURE);\n   }\n   if(child_pid==0)//子进程处理 事务\n   {\n      while(1)\n      {\n         printf(\"hello world\\n\");\n         sleep(1);\n      }\n      return 0;\n   }else\n   {\n     printf(\"father bye byte\\n\");\n     exit(EXIT_SUCCESS);\n   }\n}<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n","text":"孤儿进程:因为父进程先退出而导致一个子进程被init进程收养的进程为孤儿进程 孤儿进程:因为父进程先退出而导致一个子进程被init进程收养的进程为孤儿进程。因此，可以通过创建孤儿进程，改变native进程的父进程，达到防止系统清理。 关键代码实现: #include &lt;st...","link":"","photos":[],"count_time":{"symbolsCount":556,"symbolsTime":"1 mins."},"categories":[{"name":"Android","slug":"Android","count":3,"path":"api/categories/Android.json"}],"tags":[{"name":"Android","slug":"Android","count":2,"path":"api/tags/Android.json"},{"name":"Service","slug":"Service","count":1,"path":"api/tags/Service.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AD%A4%E5%84%BF%E8%BF%9B%E7%A8%8B-%E5%9B%A0%E4%B8%BA%E7%88%B6%E8%BF%9B%E7%A8%8B%E5%85%88%E9%80%80%E5%87%BA%E8%80%8C%E5%AF%BC%E8%87%B4%E4%B8%80%E4%B8%AA%E5%AD%90%E8%BF%9B%E7%A8%8B%E8%A2%ABinit%E8%BF%9B%E7%A8%8B%E6%94%B6%E5%85%BB%E7%9A%84%E8%BF%9B%E7%A8%8B%E4%B8%BA%E5%AD%A4%E5%84%BF%E8%BF%9B%E7%A8%8B%E3%80%82\"><span class=\"toc-text\">孤儿进程:因为父进程先退出而导致一个子进程被init进程收养的进程为孤儿进程。</span></a></li></ol>","author":{"name":"uuxia","slug":"blog-author","avatar":"/medias/avatar.jpg","link":"/","description":"一位正在重塑知识的技术人 <br /> @ <b>欢迎光临!</b>","socials":{"github":"https://github.com/xxl6097","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"baidu":{"icon":"/img/baidu.jpg","link":"https://www.baidu.com/my/index"}}}},"mapped":true,"prev_post":{"title":"教你几招，蚊子一个夏天不敢进你的房间！！","uid":"abc951d0c14e2bccc2284934d80582aa","slug":"gowaywenzi","date":"2016-05-08T23:58:25.000Z","updated":"2022-02-18T10:17:37.000Z","comments":true,"path":"api/articles/gowaywenzi.json","cover":[],"text":"教你几招，蚊子一个夏天不敢进你的房间！！ 前言“多蚊季节来了，谁都不叮偏偏就来叮你？嗡嗡吵得睡不着？怕宝宝被感染？下面教教大家一些驱蚊小窍门！！ 方法一： 用空酒瓶装上糖水或啤酒放在阴暗处，蚊子闻到甜味就会往瓶子里钻，会被啤酒或糖水黏住致死。 方法二：沸过的醋用碟装，放到房间里不...","link":"","photos":[],"count_time":{"symbolsCount":823,"symbolsTime":"1 mins."},"categories":[{"name":"生活","slug":"生活","count":4,"path":"api/categories/生活.json"}],"tags":[{"name":"驱蚊  life","slug":"驱蚊-life","count":1,"path":"api/tags/驱蚊-life.json"}],"author":{"name":"uuxia","slug":"blog-author","avatar":"/medias/avatar.jpg","link":"/","description":"一位正在重塑知识的技术人 <br /> @ <b>欢迎光临!</b>","socials":{"github":"https://github.com/xxl6097","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"baidu":{"icon":"/img/baidu.jpg","link":"https://www.baidu.com/my/index"}}}}},"next_post":{}}