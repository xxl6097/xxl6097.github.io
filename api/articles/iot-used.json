{"title":"IoT接入文档","uid":"2de4bfcb70b5f8e779a2abe056882166","slug":"iot-used","date":"2022-07-19T11:42:09.000Z","updated":"2022-07-19T11:43:17.391Z","comments":true,"path":"api/articles/iot-used.json","cover":null,"content":"<h1 id=\"4-3-设备与平台通信接口\"><a href=\"#4-3-设备与平台通信接口\" class=\"headerlink\" title=\"4.3 设备与平台通信接口\"></a>4.3 设备与平台通信接口</h1><h3 id=\"4-3-1-注册\"><a href=\"#4-3-1-注册\" class=\"headerlink\" title=\"4.3.1 注册\"></a>4.3.1 注册</h3><p>接口描述：设备上电联网后，检测本地是没有登录信息和注册标志，<br>设备需要到平台进行注册激活，注册地址固定 URL，且分为测试和正<br>式服务器地址（域名或 IP、端口）。<br>正式服务器地址（OPENHOST）：open.clife.cn<br>测试服务器地址（TESTHOST）：test.clife.cn<br>正式或者测试服务器请求 URL 只需要对服务器地址进行互换即可。</p>\n<h4 id=\"4-3-1-1-请求\"><a href=\"#4-3-1-1-请求\" class=\"headerlink\" title=\"4.3.1.1 请求\"></a>4.3.1.1 请求</h4><p>请求 URL：http(s)://OPENHOST/device/register</p>\n<p>请求参数：</p>\n<ul>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> authLevel=安全认证级别（0 高级，1 中级，2 初级）</li>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> productCode=产品编码（初、中级认证级别必选）</li>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> devId=设备 ID 号（高级认证级别必选）</li>\n</ul>\n<p>请求头：Content-Type: application/json<br><br>请求类型：POST <br><br>请求方向：设备-&gt;平台<br></p>\n<table>\n<thead>\n<tr>\n<th>参数名</th>\n<th align=\"center\">类型</th>\n<th align=\"left\">类型</th>\n<th align=\"center\">描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>cmd</td>\n<td align=\"center\">Number</td>\n<td align=\"left\">功能码，取值 2000</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td>ver</td>\n<td align=\"center\">String</td>\n<td align=\"left\">通讯协议版本，通讯双方需要比对版本号，高版本向下兼容，格式示例：1.0</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td>dir</td>\n<td align=\"center\">String</td>\n<td align=\"left\">传递方向，同 4.1.1.1</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td>msgId</td>\n<td align=\"center\">Number</td>\n<td align=\"left\">帧序号，回复帧与请求帧中值相同，否则作为异常处理（丢包、错误）。帧序号由请求方管理，确保帧的唯一性，可做累加计算。</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td>prio</td>\n<td align=\"center\">Number</td>\n<td align=\"left\">功能优先级，高优先级数据报文优先处理，默认中等优先级。优先级等级：<br>0：低优先级<br>1：中优先级<br>&gt;=2：高优先级</td>\n<td align=\"center\">N</td>\n</tr>\n<tr>\n<td>timestamp</td>\n<td align=\"center\">String</td>\n<td align=\"left\">时间戳，最小单位毫秒，UTC-8 时区。设备首次注册使用设备本地时间做时间戳，通过平台回复内容再同步时间戳。</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td>data</td>\n<td align=\"center\">Object</td>\n<td align=\"left\">关键数据对象体，HTTP 请求时需要对此数据内容作加密并使用 base64 编码处理，加解密密钥需平台申请 devKey</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td>productCode</td>\n<td align=\"center\">String</td>\n<td align=\"left\">data 中成员，产品编码，平台申请，初、中级认证必选</td>\n<td align=\"center\">N</td>\n</tr>\n<tr>\n<td></td>\n<td align=\"center\"></td>\n<td align=\"left\"></td>\n<td align=\"center\"></td>\n</tr>\n</tbody></table>\n<hr>\n<h4 id=\"4-3-2-8-文件操作\"><a href=\"#4-3-2-8-文件操作\" class=\"headerlink\" title=\"4.3.2.8 文件操作\"></a>4.3.2.8 文件操作</h4><p>接口描述：平台通知设备下载文件，或者请求设备上传文件。<br>该接口主要分为升级、日志调试、收发文件三大功能。</p>\n<h5 id=\"4-3-2-8-1-请求\"><a href=\"#4-3-2-8-1-请求\" class=\"headerlink\" title=\"4.3.2.8.1 请求\"></a>4.3.2.8.1 请求</h5><p>请求方向：平台-&gt;设备</p>\n<table>\n<thead>\n<tr>\n<th>参数名</th>\n<th align=\"center\">类型</th>\n<th align=\"left\">类型</th>\n<th align=\"center\">描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>cmd</td>\n<td align=\"center\">Number</td>\n<td align=\"left\">功能码，取值 2000</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td>ver</td>\n<td align=\"center\">String</td>\n<td align=\"left\">通讯协议版本，通讯双方需要比对版本号，高版本向下兼容，格式示例：1.0</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td>dir</td>\n<td align=\"center\">String</td>\n<td align=\"left\">传递方向，同 4.1.1.1</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td>msgId</td>\n<td align=\"center\">Number</td>\n<td align=\"left\">帧序号，回复帧与请求帧中值相同，否则作为异常处理（丢包、错误）。帧序号由请求方管理，确保帧的唯一性，可做累加计算。</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td>prio</td>\n<td align=\"center\">Number</td>\n<td align=\"left\">功能优先级，高优先级数据报文优先处理，默认中等优先级。优先级等级：<br>0：低优先级<br>1：中优先级<br>&gt;=2：高优先级</td>\n<td align=\"center\">N</td>\n</tr>\n<tr>\n<td>timestamp</td>\n<td align=\"center\">String</td>\n<td align=\"left\">时间戳，最小单位毫秒，UTC-8 时区。设备首次注册使用设备本地时间做时间戳，通过平台回复内容再同步时间戳。</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td>data</td>\n<td align=\"center\">Object</td>\n<td align=\"left\">关键数据对象体，HTTP 请求时需要对此数据内容作加密并使用 base64 编码处理，加解密密钥需平台申请 devKey</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td>fileMode</td>\n<td align=\"center\">String</td>\n<td align=\"left\">data 中成员，文件操作模式，取值：<br>“DOWN”：下载模式<br>“UP”：上传模式<br>“QUERY”：查询文件信息（主要是版本号）</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td>productVer</td>\n<td align=\"center\">Number</td>\n<td align=\"left\">data 中成员，产品版本（总版本号），基础版本从 1 开始，<strong>下载模式为升级时必选</strong></td>\n<td align=\"center\">N</td>\n</tr>\n<tr>\n<td>fileInfo</td>\n<td align=\"center\">Array of Object</td>\n<td align=\"left\">data 中成员，文件信息列表，包括 Url、软硬件版本等</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td>fileType</td>\n<td align=\"center\">String</td>\n<td align=\"left\">fileInfo 中成员，文件作用类型，取值：<br>1. 升级功能<br>“FIRM”： 设备升级固件，下载模式<br>“SUBFIRM”： 子设备（插件）的升级固件， 下载模式<br>“PROFILE”：设备 profile 文件<br>2. 日志调试<br>“LOG”：设备日志文件，上传模式<br>（3）文件收发<br>“PHOTO”：照片文件<br>“VIDEO”：视频文件<br>“VOICE”：音频文件 <br>“DATA”：记录数据文件</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td>devNum</td>\n<td align=\"center\">Number</td>\n<td align=\"left\">fileInfo 内部成员，设备（插件）ID 号，当 “<strong>fileType</strong>”为“<strong>SUBFIRM</strong>”时必选</td>\n<td align=\"center\">N</td>\n</tr>\n<tr>\n<td>software</td>\n<td align=\"center\">String</td>\n<td align=\"left\">fileInfo 内部成员，软件版本号，fileType 为 “<strong>FIRM</strong>”、“<strong>SUBFIRM</strong>”升级固件时必选</td>\n<td align=\"center\">N</td>\n</tr>\n<tr>\n<td>hardware</td>\n<td align=\"center\">String</td>\n<td align=\"left\">fileInfo 内部成员，硬件版本号，fileType 为 “<strong>FIRM</strong>”、“<strong>SUBFIRM</strong>”升级固件时必选</td>\n<td align=\"center\">N</td>\n</tr>\n<tr>\n<td>url</td>\n<td align=\"center\">String</td>\n<td align=\"left\">fileInfo 内部成员，下载或者上传文件的 Url文件地址</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td>md5</td>\n<td align=\"center\">String</td>\n<td align=\"left\">fileInfo 内部成员，下载文件的 MD5 校验码，16 进制字符串格式，<strong>升级必选</strong></td>\n<td align=\"center\">N</td>\n</tr>\n<tr>\n<td>checkSum</td>\n<td align=\"center\">Number</td>\n<td align=\"left\">fileInfo 内部成员，下载文件的累加和，<strong>升级必选</strong></td>\n<td align=\"center\">N</td>\n</tr>\n<tr>\n<td>startTime</td>\n<td align=\"center\">Number</td>\n<td align=\"left\">data 中成员，文件操作相对当前系统时间的<br>开始时间偏移，单位秒，三种情况：<br>&lt;0：当前时间之前的时间点<br>0：当前时间点<br>&gt;0：当前时间后的时间点</td>\n<td align=\"center\">N</td>\n</tr>\n<tr>\n<td>stopTime</td>\n<td align=\"center\">Number</td>\n<td align=\"left\">data 中成员，文件操作相对当前系统时间的<br>结束时间偏移，单位秒，三种情况：<br>&lt;0：当前时间之前的时间点<br>0：当前时间点<br>&gt;0：当前时间后的时间点<br>且满足 fileStopTime &gt;= fileStartTime</td>\n<td align=\"center\">N</td>\n</tr>\n</tbody></table>\n<p>示例：<br><br>文件下载模式：<br><br>加密前：<br></p>\n<pre class=\"line-numbers language-asm\" data-language=\"asm\"><code class=\"language-asm\">\n{\n    \"cmd\": 2019,\n    \"ver\": \"1.0\",\n    \"dir\": \"30\",\n    \"timestamp\": 1617787651542,\n    \"msgId\": 23454,\n    \"data\": {\n        \"fileMode\": \"DOWN\",\n        \"productVer\": 2,\n        \"fileInfo\": [\n            {\n                \"fileType\": \"FIRM\",\n                \"devNum\": 0,\n                \"software\": \"1.0.2.0\",\n                \"hardware\": \"02\",\n                \"checkSum\": 34458424,\n                \"md5\": \"6d348c902ace4d09b6d62ce982dc8ace\",\n                \"url\": \"http://clife.open.cn/device/ota/esp8266.bin\"\n            },\n            {\n                \"fileType\": \"SUBFIRM\",\n                \" devNum\": 1,\n                \"software\": \"01\",\n                \"hardware\": \"02\",\n                \"checkSum\": 764234235,\n                \"md5\": \"6d348c902ace4d09b6d62ce982dc8ace\",\n                \"url\": \"http://clife.open.cn/device/ota/esp8266_1.bin\"\n            }\n        ],\n        \"startTime\": 0,\n        \"stopTime\": 600\n    }\n}\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>文件上传模式：</p>\n<pre class=\"line-numbers language-asm\" data-language=\"asm\"><code class=\"language-asm\">\n {\n    \"cmd\": 2019,\n    \"ver\": \"1.0\",\n    \"dir\": \"30\",\n    \"timestamp\": 1617787651542,\n    \"msgId\": 231,\n    \"data\": {\n        \"fileMode\": \"UP\",\n        \"fileInfo\": [\n            {\n                \"fileType\": \"PHOTO\",\n                \"url\": \"http://clife.open.cn/device/storage\"\n            }\n        ],\n        \"startTime\": 0,\n        \"stopTime\": 60\n    }\n}\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n<h5 id=\"4-3-2-8-2-响应\"><a href=\"#4-3-2-8-2-响应\" class=\"headerlink\" title=\"4.3.2.8.2 响应\"></a>4.3.2.8.2 响应</h5><p>用于升级回复、查询回复（升级后版本主动上报）或者主动升级查询。<br><br>请求方向：设备-&gt;平台<br></p>\n<table>\n<thead>\n<tr>\n<th>参数名</th>\n<th align=\"center\">类型</th>\n<th align=\"left\">类型</th>\n<th align=\"center\">描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>cmd</td>\n<td align=\"center\">Number</td>\n<td align=\"left\">功能码，取值 2000</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td>ver</td>\n<td align=\"center\">String</td>\n<td align=\"left\">通讯协议版本，通讯双方需要比对版本号，高版本向下兼容，格式示例：1.0</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td>dir</td>\n<td align=\"center\">String</td>\n<td align=\"left\">传递方向，同 4.1.1.1</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td>msgId</td>\n<td align=\"center\">Number</td>\n<td align=\"left\">帧序号，回复帧与请求帧中值相同，否则作为异常处理（丢包、错误）。帧序号由请求方管理，确保帧的唯一性，可做累加计算。</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td>prio</td>\n<td align=\"center\">Number</td>\n<td align=\"left\">功能优先级，高优先级数据报文优先处理，默认中等优先级。优先级等级：<br>0：低优先级<br>1：中优先级<br>&gt;=2：高优先级</td>\n<td align=\"center\">N</td>\n</tr>\n<tr>\n<td>timestamp</td>\n<td align=\"center\">String</td>\n<td align=\"left\">时间戳，最小单位毫秒，UTC-8 时区。设备首次注册使用设备本地时间做时间戳，通过平台回复内容再同步时间戳。</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td>data</td>\n<td align=\"center\">Object</td>\n<td align=\"left\">关键数据对象体，HTTP 请求时需要对此数据内容作加密并使用 base64 编码处理，加解密密钥需平台申请 devKey</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td>respCode</td>\n<td align=\"center\">Number</td>\n<td align=\"left\">data 中成员，升级结果码，详见表 5.4-1</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td>respCont</td>\n<td align=\"center\">String</td>\n<td align=\"left\">data 中成员，升级结果描述，详见表 5.4-1</td>\n<td align=\"center\">Y</td>\n</tr>\n<tr>\n<td>productVer</td>\n<td align=\"center\">Number</td>\n<td align=\"left\">data 中成员，产品版本（总版本号），基础版本从 1 开始, <strong>respCode 为 3 是必选</strong></td>\n<td align=\"center\">N</td>\n</tr>\n<tr>\n<td>devVer</td>\n<td align=\"center\">Array of Object</td>\n<td align=\"left\">data 中成员，设备版本，包括软件版本、硬件版本、设备编号, <strong>respCode 为 3 是必选</strong></td>\n<td align=\"center\">N</td>\n</tr>\n<tr>\n<td>software</td>\n<td align=\"center\">String</td>\n<td align=\"left\">devVer 中成员，设备软件（固件）版本，格式“主版本.次版本.修订版本.修复版本”，如1.0.0.0，<strong>详见 5.1</strong></td>\n<td align=\"center\">N</td>\n</tr>\n<tr>\n<td>hardware</td>\n<td align=\"center\">String</td>\n<td align=\"left\">devVer 中成员，设备硬件版本，格式“主版本.次版本”，如 1.0</td>\n<td align=\"center\">N</td>\n</tr>\n<tr>\n<td>devNum</td>\n<td align=\"center\">Number</td>\n<td align=\"left\">devVer 中成员，设备编号，特别的，0 代表通信模组</td>\n<td align=\"center\">N</td>\n</tr>\n</tbody></table>\n<p>示例：<br><br>文件升级（下载模式）回复：<br></p>\n<pre class=\"line-numbers language-asm\" data-language=\"asm\"><code class=\"language-asm\">{\n    \"cmd\": 2018,\n    \"ver\": \"1.0\",\n    \"dir\": \"03\",\n    \"timestamp\": 1617787651542,\n    \"msgId\": 23454,\n    \"data\": {\n        \"respCode\": 3,\n        \"respCont\": \"ver\",\n        \"productVer\": 2,\n        \"devVer\": [\n            {\n                \"software\": \"1.0.0.0\",\n                \"hardware\": \"1.0\",\n                \"devNum\": 0\n            },\n            {\n                \"software\": \"01\",\n                \"hardware\": \"02\",\n                \"devNum\": 1\n            }\n        ]\n    }\n}<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>主动升级查询：</p>\n<pre class=\"line-numbers language-asm\" data-language=\"asm\"><code class=\"language-asm\">\n{\n    \"cmd\": 2018,\n    \"ver\": \"1.0\",\n    \"dir\": \"03\",\n    \"timestamp\": 1617787651542,\n    \"msgId\": 23454,\n    \"data\": {\n        \"respCode\": 2,\n        \"respCont\": \"SUBFIRM\"\n    }\n}\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n<h2 id=\"5-1-版本号约定\"><a href=\"#5-1-版本号约定\" class=\"headerlink\" title=\"5.1 版本号约定\"></a>5.1 版本号约定</h2><p>格式：主版本.次版本.修订版本.修复版本<br><br>版本号变化说明如表 5.1-1：<br></p>\n<table>\n<thead>\n<tr>\n<th><strong>版本号</strong></th>\n<th align=\"left\"><strong>软件</strong></th>\n<th align=\"center\">硬件</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>主版本</td>\n<td align=\"left\">软件兼容性变化时递增</td>\n<td align=\"center\">硬件大改动时递增</td>\n</tr>\n<tr>\n<td>次版本</td>\n<td align=\"left\">软件增加新功能，不影响兼容性时递增</td>\n<td align=\"center\">硬件小改动时递增，非必需</td>\n</tr>\n<tr>\n<td>修订版本</td>\n<td align=\"left\">BUG 修复时递增</td>\n<td align=\"center\">无</td>\n</tr>\n<tr>\n<td>修订版本</td>\n<td align=\"left\">优化记录或者测试时递增，非必需</td>\n<td align=\"center\">无</td>\n</tr>\n</tbody></table>\n<ul>\n<li>表 5.1-1 版本号变化说明</li>\n</ul>\n<p>版本级别：主版本 &gt; 次版本 &gt; 修订版本 &gt; 修复版本<br><br>当低一级别的版本号累计到 100 时，递增上一级版本，低一级版本号 归零。<br></p>\n<h2 id=\"5-3-功能-ID\"><a href=\"#5-3-功能-ID\" class=\"headerlink\" title=\"5.3 功能 ID\"></a>5.3 功能 ID</h2><table>\n<thead>\n<tr>\n<th><strong>版本号</strong></th>\n<th align=\"left\"><strong>说明</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>2000</td>\n<td align=\"left\">注册请求</td>\n</tr>\n<tr>\n<td>2001</td>\n<td align=\"left\">注册响应</td>\n</tr>\n<tr>\n<td>2004</td>\n<td align=\"left\">连接请求</td>\n</tr>\n<tr>\n<td>2005</td>\n<td align=\"left\">连接响应</td>\n</tr>\n<tr>\n<td>2006</td>\n<td align=\"left\">数据上报请求</td>\n</tr>\n<tr>\n<td>2009</td>\n<td align=\"left\">数据查询请求</td>\n</tr>\n<tr>\n<td>2011</td>\n<td align=\"left\">数据控制请求</td>\n</tr>\n<tr>\n<td>2012</td>\n<td align=\"left\">解绑回复</td>\n</tr>\n<tr>\n<td>2013</td>\n<td align=\"left\">设备解绑</td>\n</tr>\n<tr>\n<td>2014</td>\n<td align=\"left\">遗嘱</td>\n</tr>\n<tr>\n<td>2017</td>\n<td align=\"left\">强制下线</td>\n</tr>\n<tr>\n<td>2018</td>\n<td align=\"left\">文件操作响应</td>\n</tr>\n<tr>\n<td>2019</td>\n<td align=\"left\">文件操作请求</td>\n</tr>\n</tbody></table>\n<ul>\n<li>表 5.3-1 功能 ID 统计<br>说明：<br><br>     功能码在 2000 及以上范围表示设备与服务器使用的功能码；<br><br>     功能码 2000 以下范围属于本地通信使用，其中 1100 以下范围功 能码用作配网，1100 及以上范围用作设备与网关通信使用。<br></li>\n</ul>\n<h2 id=\"5-4-升级结果码\"><a href=\"#5-4-升级结果码\" class=\"headerlink\" title=\"5.4 升级结果码\"></a>5.4 升级结果码</h2><table>\n<thead>\n<tr>\n<th><strong>响应码(respCode)</strong></th>\n<th align=\"left\"><strong>描述(respCont)</strong></th>\n<th align=\"left\"><strong>说明</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td align=\"left\">[1,100]</td>\n<td align=\"left\">升级进度信息:<br>1:版本下载完成,开始升级<br>100:升级完成</td>\n</tr>\n<tr>\n<td>1</td>\n<td align=\"left\">[1,100]</td>\n<td align=\"left\">下载进度信息:<br>1:开始下载<br>100:完成下载</td>\n</tr>\n<tr>\n<td>2</td>\n<td align=\"left\">[ALL,FIRM,SUBFIRM]</td>\n<td align=\"left\">设备主动请求升级：<br>ALL：设备所有升级固件（默认）<br>FIRM: 设备升级固件新版本请求<br>SUBFIRM: 子设备（插件）的升级固<br>件新版本请求</td>\n</tr>\n<tr>\n<td>3</td>\n<td align=\"left\">描述信息</td>\n<td align=\"left\">查询响应信息：<br>服务器查询时回复</td>\n</tr>\n<tr>\n<td>-1</td>\n<td align=\"left\">[0,1,2,X]</td>\n<td align=\"left\">过程异常信息：<br>0:URL非法或设备忙;<br>1:升级中断;<br>2:版本下载完成,校验异常取消升级;<br>X:其他异常信息(可为具体描述)</td>\n</tr>\n</tbody></table>\n<ul>\n<li>表 5.4-1 升级结果码表<br></li>\n</ul>\n<p>具体为：<br><br>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;正常升级：{1,1},{1,100},{0,1},{0,100}上报至少 4 个事件<br><br>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;升级异常：{-1,0};{-1,1};{-1,2}上报三种情况之一的若干事件<br><br>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;主动（重新）请求升级：{2,FIRM} 或者 {2,SUBFIRM}<br></p>\n","text":"4.3 设备与平台通信接口4.3.1 注册接口描述：设备上电联网后，检测本地是没有登录信息和注册标志，设备需要到平台进行注册激活，注册地址固定 URL，且分为测试和正式服务器地址（域名或 IP、端口）。正式服务器地址（OPENHOST）：open.clife.cn测试服务器地址（...","link":"","photos":[],"count_time":{"symbolsCount":"6.5k","symbolsTime":"6 mins."},"categories":[{"name":"IoT","slug":"IoT","count":4,"path":"api/categories/IoT.json"},{"name":"mqtt","slug":"mqtt","count":1,"path":"api/categories/mqtt.json"}],"tags":[{"name":"Iot","slug":"Iot","count":1,"path":"api/tags/Iot.json"},{"name":"mqtt","slug":"mqtt","count":1,"path":"api/tags/mqtt.json"},{"name":"c++","slug":"c","count":1,"path":"api/tags/c.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#4-3-%E8%AE%BE%E5%A4%87%E4%B8%8E%E5%B9%B3%E5%8F%B0%E9%80%9A%E4%BF%A1%E6%8E%A5%E5%8F%A3\"><span class=\"toc-text\">4.3 设备与平台通信接口</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4-3-1-%E6%B3%A8%E5%86%8C\"><span class=\"toc-text\">4.3.1 注册</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-3-1-1-%E8%AF%B7%E6%B1%82\"><span class=\"toc-text\">4.3.1.1 请求</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-3-2-8-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C\"><span class=\"toc-text\">4.3.2.8 文件操作</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-3-2-8-1-%E8%AF%B7%E6%B1%82\"><span class=\"toc-text\">4.3.2.8.1 请求</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-3-2-8-2-%E5%93%8D%E5%BA%94\"><span class=\"toc-text\">4.3.2.8.2 响应</span></a></li></ol></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#5-1-%E7%89%88%E6%9C%AC%E5%8F%B7%E7%BA%A6%E5%AE%9A\"><span class=\"toc-text\">5.1 版本号约定</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#5-3-%E5%8A%9F%E8%83%BD-ID\"><span class=\"toc-text\">5.3 功能 ID</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#5-4-%E5%8D%87%E7%BA%A7%E7%BB%93%E6%9E%9C%E7%A0%81\"><span class=\"toc-text\">5.4 升级结果码</span></a></li></ol></li></ol>","author":{"name":"uuxia","slug":"blog-author","avatar":"/medias/avatar.jpg","link":"/","description":"一位正在重塑知识的技术人 <br /> @ <b>欢迎光临</b>","socials":{"github":"https://github.com/xxl6097","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"baidu":{"icon":"https://himg.bdimg.com/sys/portrait/item/public.1.868e95ea.DjJabcwawzIP0jmepO6KfQ.jpg","link":"https://www.baidu.com/my/index"}}}},"mapped":true,"prev_post":{"title":"Android 编译 openssl 的注意事项","uid":"89bb463d3273af6b76496d142694c4e1","slug":"opensslforandroid","date":"2022-07-21T02:01:47.000Z","updated":"2022-07-21T02:03:11.740Z","comments":true,"path":"api/articles/opensslforandroid.json","cover":null,"text":" 以下载链接https://www.openssl.org/source/openssl-1.1.1o.tar.gz为例下载解压之后，查看根目录的 NOTES.ANDROID，其中有 export ANDROID_NDK_HOME=/home/whoever/Android/an...","link":"","photos":[],"count_time":{"symbolsCount":"3.4k","symbolsTime":"3 mins."},"categories":[{"name":"ndk","slug":"ndk","count":1,"path":"api/categories/ndk.json"},{"name":"openssl","slug":"openssl","count":1,"path":"api/categories/openssl.json"}],"tags":[{"name":"ndk","slug":"ndk","count":2,"path":"api/tags/ndk.json"},{"name":"Android","slug":"Android","count":2,"path":"api/tags/Android.json"},{"name":"openssl","slug":"openssl","count":1,"path":"api/tags/openssl.json"}],"author":{"name":"uuxia","slug":"blog-author","avatar":"/medias/avatar.jpg","link":"/","description":"一位正在重塑知识的技术人 <br /> @ <b>欢迎光临</b>","socials":{"github":"https://github.com/xxl6097","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"baidu":{"icon":"https://himg.bdimg.com/sys/portrait/item/public.1.868e95ea.DjJabcwawzIP0jmepO6KfQ.jpg","link":"https://www.baidu.com/my/index"}}}}},"next_post":{"title":"SSH公钥免密登录","uid":"65ce77b5983a73fa652d4b08c40f272d","slug":"ssh-pub-login","date":"2022-07-01T12:23:16.000Z","updated":"2022-10-31T13:56:54.024Z","comments":true,"path":"api/articles/ssh-pub-login.json","cover":null,"text":"ssh连接使用公钥免密登录 1. 制作公钥ed25519方式[root@VM-4-12-centos ~]# ssh-keygen -t ed25519 -C \"HongKong@uuxia.cn\" Generating public/private ed25519 key pa...","link":"","photos":[],"count_time":{"symbolsCount":"3k","symbolsTime":"3 mins."},"categories":[{"name":"ssh","slug":"ssh","count":1,"path":"api/categories/ssh.json"}],"tags":[{"name":"ssh","slug":"ssh","count":1,"path":"api/tags/ssh.json"},{"name":"pubkey","slug":"pubkey","count":1,"path":"api/tags/pubkey.json"},{"name":"shell","slug":"shell","count":1,"path":"api/tags/shell.json"}],"author":{"name":"uuxia","slug":"blog-author","avatar":"/medias/avatar.jpg","link":"/","description":"一位正在重塑知识的技术人 <br /> @ <b>欢迎光临</b>","socials":{"github":"https://github.com/xxl6097","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"baidu":{"icon":"https://himg.bdimg.com/sys/portrait/item/public.1.868e95ea.DjJabcwawzIP0jmepO6KfQ.jpg","link":"https://www.baidu.com/my/index"}}}}}}