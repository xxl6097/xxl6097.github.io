{"title":"喜马拉雅WiFi音响绑定及通讯协议初稿","uid":"285ed5b1fb2c878a0e222864d60850e2","slug":"ximalaya","date":"2016-05-11T14:54:48.000Z","updated":"2022-02-22T10:16:43.640Z","comments":true,"path":"api/articles/ximalaya.json","cover":[],"content":"<p>喜马拉雅WiFi音响绑定及通讯协议初稿</p>\n<span id=\"more\"></span>\n<h1 id=\"通讯协议\"><a href=\"#通讯协议\" class=\"headerlink\" title=\"通讯协议\"></a><strong>通讯协议</strong></h1><table>\n<thead>\n<tr>\n<th align=\"left\">0x5A</th>\n<th align=\"left\">数据长度</th>\n<th align=\"left\">框架版本</th>\n<th align=\"left\">协议类型</th>\n<th align=\"left\">设备编码</th>\n<th align=\"left\">Mac地址</th>\n<th align=\"left\">数据帧序列号</th>\n<th align=\"left\">保留字</th>\n<th align=\"left\">数据类型</th>\n<th align=\"left\">数据内容</th>\n<th align=\"left\">检验码FCS</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">1字节</td>\n<td align=\"left\">2字节</td>\n<td align=\"left\">1字节</td>\n<td align=\"left\">1字节</td>\n<td align=\"left\">8字节</td>\n<td align=\"left\">6字节</td>\n<td align=\"left\">4字节</td>\n<td align=\"left\">8字节</td>\n<td align=\"left\">2字节</td>\n<td align=\"left\">N字节</td>\n<td align=\"left\">2字节</td>\n</tr>\n</tbody></table>\n<h1 id=\"通讯Json格式：\"><a href=\"#通讯Json格式：\" class=\"headerlink\" title=\"通讯Json格式：\"></a><strong>通讯Json格式</strong>：</h1><pre><code>{ \n \"cmd\": 0 ,//命令码\n\"code\": 0,\t//返回码\n\"msg\": \"\",\t//状态消息\n\"data\": ......\t//数据节点\n}\n</code></pre>\n<h2 id=\"参数说明\"><a href=\"#参数说明\" class=\"headerlink\" title=\"参数说明\"></a><strong>参数说明</strong></h2><table>\n<thead>\n<tr>\n<th align=\"left\">参数名称</th>\n<th align=\"left\">是否必须</th>\n<th align=\"left\">字段类型</th>\n<th align=\"left\">参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">cmd</td>\n<td align=\"left\">YES</td>\n<td align=\"left\">int</td>\n<td align=\"left\">命令码</td>\n</tr>\n<tr>\n<td align=\"left\">code</td>\n<td align=\"left\">NO</td>\n<td align=\"left\">int</td>\n<td align=\"left\">返回码</td>\n</tr>\n<tr>\n<td align=\"left\">msg</td>\n<td align=\"left\">NO</td>\n<td align=\"left\">String</td>\n<td align=\"left\">状态消息</td>\n</tr>\n<tr>\n<td align=\"left\">data</td>\n<td align=\"left\">NO</td>\n<td align=\"left\">String</td>\n<td align=\"left\">数据节点</td>\n</tr>\n</tbody></table>\n<h2 id=\"全局命令码\"><a href=\"#全局命令码\" class=\"headerlink\" title=\"全局命令码\"></a><strong>全局命令码</strong></h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>每一种操作对用一个命令码，用作标识指令。</p></blockquote>\n<h4 id=\"全局命令码说明如下：\"><a href=\"#全局命令码说明如下：\" class=\"headerlink\" title=\"全局命令码说明如下：\"></a>全局命令码说明如下：</h4><table>\n<thead>\n<tr>\n<th align=\"left\">命令码（十六进制）</th>\n<th align=\"left\">十进制</th>\n<th align=\"left\">说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">0x0001</td>\n<td align=\"left\">1</td>\n<td align=\"left\">添加歌曲</td>\n</tr>\n<tr>\n<td align=\"left\">0x0002</td>\n<td align=\"left\">2</td>\n<td align=\"left\">App查询歌曲列表</td>\n</tr>\n<tr>\n<td align=\"left\">0x0003</td>\n<td align=\"left\">3</td>\n<td align=\"left\">升级操作</td>\n</tr>\n<tr>\n<td align=\"left\">0x0004</td>\n<td align=\"left\">4</td>\n<td align=\"left\">播放</td>\n</tr>\n<tr>\n<td align=\"left\">0x0005</td>\n<td align=\"left\">5</td>\n<td align=\"left\">关机</td>\n</tr>\n<tr>\n<td align=\"left\">0x0006</td>\n<td align=\"left\">6</td>\n<td align=\"left\">静音/解除静音</td>\n</tr>\n<tr>\n<td align=\"left\">0x0007</td>\n<td align=\"left\">7</td>\n<td align=\"left\">音量+</td>\n</tr>\n<tr>\n<td align=\"left\">0x0008</td>\n<td align=\"left\">8</td>\n<td align=\"left\">音量-</td>\n</tr>\n<tr>\n<td align=\"left\">0x0009</td>\n<td align=\"left\">9</td>\n<td align=\"left\">切换aux状态</td>\n</tr>\n<tr>\n<td align=\"left\">0x000a</td>\n<td align=\"left\">10</td>\n<td align=\"left\">下一曲</td>\n</tr>\n<tr>\n<td align=\"left\">0x000b</td>\n<td align=\"left\">11</td>\n<td align=\"left\">上一曲</td>\n</tr>\n<tr>\n<td align=\"left\">0x000c</td>\n<td align=\"left\">12</td>\n<td align=\"left\">暂停</td>\n</tr>\n<tr>\n<td align=\"left\">0x000d</td>\n<td align=\"left\">13</td>\n<td align=\"left\">App查询播放状态</td>\n</tr>\n<tr>\n<td align=\"left\">0x000e</td>\n<td align=\"left\">14</td>\n<td align=\"left\">WIFI 无线简易连接</td>\n</tr>\n<tr>\n<td align=\"left\">0x000f</td>\n<td align=\"left\">15</td>\n<td align=\"left\">设备回复心跳</td>\n</tr>\n<tr>\n<td align=\"left\">0x400f</td>\n<td align=\"left\">16399</td>\n<td align=\"left\">App发送心跳</td>\n</tr>\n<tr>\n<td align=\"left\">0x0011</td>\n<td align=\"left\">17</td>\n<td align=\"left\">palyMode(顺序播放/随机播放/列表循环/单曲循环/)</td>\n</tr>\n<tr>\n<td align=\"left\">0x0012</td>\n<td align=\"left\">18</td>\n<td align=\"left\">音量设置（直接设置音量值）</td>\n</tr>\n<tr>\n<td align=\"left\">0x0013</td>\n<td align=\"left\">19</td>\n<td align=\"left\">设备推送播放状态</td>\n</tr>\n<tr>\n<td align=\"left\">0x0014</td>\n<td align=\"left\">20</td>\n<td align=\"left\">设备推送播放列表</td>\n</tr>\n<tr>\n<td align=\"left\">0x0015</td>\n<td align=\"left\">21</td>\n<td align=\"left\">拖拽进度条</td>\n</tr>\n</tbody></table>\n<h2 id=\"全局返回码\"><a href=\"#全局返回码\" class=\"headerlink\" title=\"全局返回码\"></a><strong>全局返回码</strong></h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>每次调用接口时，可能获得正确或错误的返回码，可以根据返回码信息调试接口，排查错误。<br>####全局返回码说明如下：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">0</th>\n<th align=\"left\">请求成功</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">200</td>\n<td align=\"left\">无错误</td>\n</tr>\n<tr>\n<td align=\"left\">400</td>\n<td align=\"left\">不支持此接口</td>\n</tr>\n<tr>\n<td align=\"left\">401</td>\n<td align=\"left\">JSON数据解析错误</td>\n</tr>\n</tbody></table></blockquote>\n<h2 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a><strong>示例</strong></h2><h3 id=\"字符串\"><a href=\"#字符串\" class=\"headerlink\" title=\"字符串\"></a><strong>字符串</strong></h3><pre><code>{ \n\"cmd\": 0x0001 ,//命令码\n\"code\": 0,  //返回码\n\"msg\": \"\",  //状态消息\n\"data\": \"This is string\"  //数据节点\n}\n</code></pre>\n<h3 id=\"整形参数\"><a href=\"#整形参数\" class=\"headerlink\" title=\"整形参数\"></a><strong>整形参数</strong></h3><pre><code>{ \n\"cmd\": 0x0001 ,//命令码\n\"code\": 0,  //返回码\n\"msg\": \"\",  //状态消息\n\"data\": 1  //数据节点\n}\n</code></pre>\n<h3 id=\"对象\"><a href=\"#对象\" class=\"headerlink\" title=\"对象\"></a><strong>对象</strong></h3><pre><code>{ \n\"cmd\": 0x0001 ,//命令码\n\"code\": 0,  //返回码\n\"msg\": \"\",  //状态消息\n\"data\":  {\n      \"ssid\":\"TP-link\",  //连接的路由名称\n      \"password\":\"12345678\",  //路由密码,需要加密\n  }  \n}\n</code></pre>\n<h3 id=\"数组\"><a href=\"#数组\" class=\"headerlink\" title=\"数组\"></a><strong>数组</strong></h3><pre><code>{ \n\"cmd\": 0x001 ,//命令码\n\"code\": 0,  //返回码\n\"msg\": \"\",  //状态消息\n\"data\":[\n  {\n        \"id\"      ：   \"0\"\n        \"name\" ： “xxxx\",\n        \"artist\" ： “xxxx\",\n        \"album_title\"： “xxxx\",\n        \"cover_url_small”：“xxxx\",\n        \"cover_url_middle\":\"xxxx\",\n        \"cover_url_large\":\"xxxx\",\n        \"url\":\"xxxxxxxxx\"  {详细规格见规格说明url部分},\n  },\n  {\n        \"id\":\"1\"\n        \"name\":\"xxxx1\",\n        \"artist\":\"xxxx1\",\n        \"album\":\"xxxx1\",\n        \"cover_url_small\":\"xxxx\",\n        \"cover_url_middle\":\"xxxx\",\n        \"cover_url_large\":\"xxxx\",\n        \"url\":\"xxxxxxxxxx\"{详细规格见规格说明url部分},\n  }\n   ]\n}\n</code></pre>\n<h2 id=\"指令说明\"><a href=\"#指令说明\" class=\"headerlink\" title=\"指令说明\"></a><strong>指令说明</strong></h2><h3 id=\"一、设备基础指令\"><a href=\"#一、设备基础指令\" class=\"headerlink\" title=\"一、设备基础指令\"></a><strong>一、设备基础指令</strong></h3><ol>\n<li><strong>App扫描设备</strong></li>\n</ol>\n<table>\n<thead>\n<tr>\n<th align=\"left\">0x5A</th>\n<th align=\"left\">数据长度</th>\n<th align=\"left\">框架版本</th>\n<th align=\"left\">协议类型</th>\n<th align=\"left\">设备编码</th>\n<th align=\"left\">Mac地址</th>\n<th align=\"left\">数据帧序列号</th>\n<th align=\"left\">保留字</th>\n<th align=\"left\">数据类型</th>\n<th align=\"left\">数据内容</th>\n<th align=\"left\">检验码FCS</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">5A</td>\n<td align=\"left\">0022</td>\n<td align=\"left\">40</td>\n<td align=\"left\">01</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">000000000000</td>\n<td align=\"left\">20000000</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">0405</td>\n<td align=\"left\">data</td>\n<td align=\"left\">381a</td>\n</tr>\n</tbody></table>\n<ul>\n<li><font color=\"#c00\"><strong>命令字：0x0405</strong></font></li>\n<li><font color=\"#c00\"><strong>data区：NULL</strong></font></li>\n</ul>\n<ol start=\"2\">\n<li><strong>设备回复自身信息</strong></li>\n</ol>\n<table>\n<thead>\n<tr>\n<th align=\"left\">0x5A</th>\n<th align=\"left\">数据长度</th>\n<th align=\"left\">框架版本</th>\n<th align=\"left\">协议类型</th>\n<th align=\"left\">设备编码</th>\n<th align=\"left\">Mac地址</th>\n<th align=\"left\">数据帧序列号</th>\n<th align=\"left\">保留字</th>\n<th align=\"left\">数据类型</th>\n<th align=\"left\">数据内容</th>\n<th align=\"left\">检验码FCS</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">5A</td>\n<td align=\"left\">xxxx</td>\n<td align=\"left\">40</td>\n<td align=\"left\">01</td>\n<td align=\"left\">00000199001b0300</td>\n<td align=\"left\">d8f710e019b0</td>\n<td align=\"left\">00000000</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">0305</td>\n<td align=\"left\">data</td>\n<td align=\"left\">xxxx</td>\n</tr>\n</tbody></table>\n<ul>\n<li><font color=\"#c00\"><strong>命令字：0x0305</strong></font></li>\n<li><font color=\"#c00\"><strong>厂商ID：0x0199</strong> </font></li>\n<li><font color=\"#c00\"><strong>大分类：0x1b</strong>  </font></li>\n<li><font color=\"#c00\"><strong>小分类：0x03</strong></font></li>\n</ul>\n<ol start=\"3\">\n<li><strong>App发送心跳包</strong></li>\n</ol>\n<table>\n<thead>\n<tr>\n<th align=\"left\">0x5A</th>\n<th align=\"left\">数据长度</th>\n<th align=\"left\">框架版本</th>\n<th align=\"left\">协议类型</th>\n<th align=\"left\">设备编码</th>\n<th align=\"left\">Mac地址</th>\n<th align=\"left\">数据帧序列号</th>\n<th align=\"left\">保留字</th>\n<th align=\"left\">数据类型</th>\n<th align=\"left\">数据内容</th>\n<th align=\"left\">检验码FCS</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">5A</td>\n<td align=\"left\">xxxx</td>\n<td align=\"left\">40</td>\n<td align=\"left\">01</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">000000000000</td>\n<td align=\"left\">20000000</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">0104</td>\n<td align=\"left\">data</td>\n<td align=\"left\">xxxx</td>\n</tr>\n</tbody></table>\n<ul>\n<li><font color=\"#c00\"><strong>命令字：0x0104</strong></font></li>\n<li><font color=\"#c00\"><strong>data区：json</strong></font></li>\n</ul>\n<p>示例：</p>\n<pre><code>    { \n     \"cmd\": 0x400f ,//命令码\n    \"code\": 0,\t//返回码\n    \"msg\": \"\",\t//状态消息\n    \"data\": ......\t//数据节点\n    }\n</code></pre>\n<ol start=\"4\">\n<li><strong>设备回复心跳</strong></li>\n</ol>\n<table>\n<thead>\n<tr>\n<th align=\"left\">0x5A</th>\n<th align=\"left\">数据长度</th>\n<th align=\"left\">框架版本</th>\n<th align=\"left\">协议类型</th>\n<th align=\"left\">设备编码</th>\n<th align=\"left\">Mac地址</th>\n<th align=\"left\">数据帧序列号</th>\n<th align=\"left\">保留字</th>\n<th align=\"left\">数据类型</th>\n<th align=\"left\">数据内容</th>\n<th align=\"left\">检验码FCS</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">5A</td>\n<td align=\"left\">xxxx</td>\n<td align=\"left\">40</td>\n<td align=\"left\">01</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">000000000000</td>\n<td align=\"left\">00000000</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">0204</td>\n<td align=\"left\">data</td>\n<td align=\"left\">xxxx</td>\n</tr>\n</tbody></table>\n<ul>\n<li><font color=\"#c00\"> <strong>命令字：0x0204</strong></font> </li>\n<li><font color=\"#c00\"> <strong>data区：json</strong></font></li>\n</ul>\n<p>示例：</p>\n<pre><code>    { \n     \"cmd\": 0x000f ,//命令码\n    \"code\": 0,\t//返回码\n    \"msg\": \"\",\t//状态消息\n    \"data\":  {\n              \"deviceId\": \"SPK设备序列号\"\n          }  \n    }\n</code></pre>\n<h3 id=\"二、App主动控制终端指令\"><a href=\"#二、App主动控制终端指令\" class=\"headerlink\" title=\"二、App主动控制终端指令\"></a><strong>二、App主动控制终端指令</strong></h3><p><strong>1.App控制终端</strong></p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">0x5A</th>\n<th align=\"left\">数据长度</th>\n<th align=\"left\">框架版本</th>\n<th align=\"left\">协议类型</th>\n<th align=\"left\">设备编码</th>\n<th align=\"left\">Mac地址</th>\n<th align=\"left\">数据帧序列号</th>\n<th align=\"left\">保留字</th>\n<th align=\"left\">数据类型</th>\n<th align=\"left\">数据内容</th>\n<th align=\"left\">检验码FCS</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">5A</td>\n<td align=\"left\">xxxx</td>\n<td align=\"left\">40</td>\n<td align=\"left\">01</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">000000000000</td>\n<td align=\"left\">00000000</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">0104</td>\n<td align=\"left\">data</td>\n<td align=\"left\">xxxx</td>\n</tr>\n</tbody></table>\n<ul>\n<li><font color=\"#c00\"> <strong>命令字：0x0104</strong></font> </li>\n<li><font color=\"#c00\"> <strong>data区：json数据</strong></font></li>\n</ul>\n<p>示例：</p>\n<pre><code>    { \n     \"cmd\": 0x00xx ,//命令码\n    \"code\": 0,\t//返回码\n    \"msg\": \"\",\t//状态消息\n    \"data\": ......\t//数据节点\n    }\n</code></pre>\n<p><strong>2.终端回复App</strong></p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">0x5A</th>\n<th align=\"left\">数据长度</th>\n<th align=\"left\">框架版本</th>\n<th align=\"left\">协议类型</th>\n<th align=\"left\">设备编码</th>\n<th align=\"left\">Mac地址</th>\n<th align=\"left\">数据帧序列号</th>\n<th align=\"left\">保留字</th>\n<th align=\"left\">数据类型</th>\n<th align=\"left\">数据内容</th>\n<th align=\"left\">检验码FCS</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">5A</td>\n<td align=\"left\">xxxx</td>\n<td align=\"left\">40</td>\n<td align=\"left\">01</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">000000000000</td>\n<td align=\"left\">00000000</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">0204</td>\n<td align=\"left\">data</td>\n<td align=\"left\">xxxx</td>\n</tr>\n</tbody></table>\n<ul>\n<li><font color=\"#c00\"> <strong>命令字：0x0204</strong></font> </li>\n<li><font color=\"#c00\"> <strong>data区：json数据</strong></font></li>\n</ul>\n<p>示例：</p>\n<pre><code>    { \n     \"cmd\": 0x00xx ,//命令码\n    \"code\": 0,\t//返回码\n    \"msg\": \"\",\t//状态消息\n    \"data\": ......\t//数据节点\n    }\n</code></pre>\n<h3 id=\"三、终端主动发送控制数据给App\"><a href=\"#三、终端主动发送控制数据给App\" class=\"headerlink\" title=\"三、终端主动发送控制数据给App\"></a><strong>三、终端主动发送控制数据给App</strong></h3><p><strong>1.周期上传运行数据</strong></p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">0x5A</th>\n<th align=\"left\">数据长度</th>\n<th align=\"left\">框架版本</th>\n<th align=\"left\">协议类型</th>\n<th align=\"left\">设备编码</th>\n<th align=\"left\">Mac地址</th>\n<th align=\"left\">数据帧序列号</th>\n<th align=\"left\">保留字</th>\n<th align=\"left\">数据类型</th>\n<th align=\"left\">数据内容</th>\n<th align=\"left\">检验码FCS</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">5A</td>\n<td align=\"left\">xxxx</td>\n<td align=\"left\">40</td>\n<td align=\"left\">01</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">000000000000</td>\n<td align=\"left\">00000000</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">0105</td>\n<td align=\"left\">data</td>\n<td align=\"left\">xxxx</td>\n</tr>\n</tbody></table>\n<ul>\n<li><font color=\"#c00\"> <strong>命令字：0x0105</strong></font> </li>\n<li><font color=\"#c00\"> <strong>data区：json数据</strong></font></li>\n</ul>\n<p>示例：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">{ \n\t     \"cmd\": 0x0013 ,//命令码\n\t\t\"code\": 0,\t//返回码\n\t\t\"msg\": \"\",\t//状态消息\n\t\t\"data\": ......\t//数据节点\n}\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n<hr>\n<h1 id=\"音箱数据模型\"><a href=\"#音箱数据模型\" class=\"headerlink\" title=\"音箱数据模型\"></a><strong>音箱数据模型</strong></h1><h2 id=\"一、歌单\"><a href=\"#一、歌单\" class=\"headerlink\" title=\"一、歌单\"></a><strong>一、歌单</strong></h2><p><strong>参数说明</strong></p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">参数名称</th>\n<th align=\"left\">是否必须</th>\n<th align=\"left\">字段类型</th>\n<th align=\"left\">参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">id</td>\n<td align=\"left\">是</td>\n<td align=\"left\">int</td>\n<td align=\"left\">歌曲ID</td>\n</tr>\n<tr>\n<td align=\"left\">name</td>\n<td align=\"left\">否</td>\n<td align=\"left\">string</td>\n<td align=\"left\">演唱者</td>\n</tr>\n<tr>\n<td align=\"left\">artist</td>\n<td align=\"left\">否</td>\n<td align=\"left\">String</td>\n<td align=\"left\">艺术家</td>\n</tr>\n<tr>\n<td align=\"left\">album_title</td>\n<td align=\"left\">否</td>\n<td align=\"left\">String</td>\n<td align=\"left\">专辑标题</td>\n</tr>\n<tr>\n<td align=\"left\">lrc_id</td>\n<td align=\"left\">否</td>\n<td align=\"left\">String</td>\n<td align=\"left\">歌词ID</td>\n</tr>\n<tr>\n<td align=\"left\">image_url_small</td>\n<td align=\"left\">否</td>\n<td align=\"left\">String</td>\n<td align=\"left\">歌曲海报1</td>\n</tr>\n<tr>\n<td align=\"left\">image_url_middle</td>\n<td align=\"left\">否</td>\n<td align=\"left\">String</td>\n<td align=\"left\">歌曲海报2</td>\n</tr>\n<tr>\n<td align=\"left\">image_url_large</td>\n<td align=\"left\">否</td>\n<td align=\"left\">String</td>\n<td align=\"left\">歌曲海报3</td>\n</tr>\n<tr>\n<td align=\"left\">mac</td>\n<td align=\"left\">否</td>\n<td align=\"left\">String</td>\n<td align=\"left\">Mac地址</td>\n</tr>\n<tr>\n<td align=\"left\">total_time</td>\n<td align=\"left\">否</td>\n<td align=\"left\">int</td>\n<td align=\"left\">歌曲时长</td>\n</tr>\n<tr>\n<td align=\"left\">album_id</td>\n<td align=\"left\">否</td>\n<td align=\"left\">int</td>\n<td align=\"left\">专辑ID</td>\n</tr>\n<tr>\n<td align=\"left\">utype</td>\n<td align=\"left\">否</td>\n<td align=\"left\">int</td>\n<td align=\"left\">比如 虾米音乐 考虑 喜马拉雅 之类的</td>\n</tr>\n<tr>\n<td align=\"left\">uri</td>\n<td align=\"left\">是</td>\n<td align=\"left\">int</td>\n<td align=\"left\">歌曲URL</td>\n</tr>\n<tr>\n<td align=\"left\">downloadurl</td>\n<td align=\"left\">是</td>\n<td align=\"left\">String</td>\n<td align=\"left\">下载url</td>\n</tr>\n</tbody></table>\n<h2 id=\"二、播放状态\"><a href=\"#二、播放状态\" class=\"headerlink\" title=\"二、播放状态\"></a><strong>二、播放状态</strong></h2><p><strong>参数说明</strong></p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">参数名称</th>\n<th align=\"left\">是否必须</th>\n<th align=\"left\">字段类型</th>\n<th align=\"left\">参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">id\t是</td>\n<td align=\"left\">int</td>\n<td align=\"left\">歌曲ID</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">mtype</td>\n<td align=\"left\">是</td>\n<td align=\"left\">String</td>\n<td align=\"left\">虾米，百度云盘，本地音乐…</td>\n</tr>\n<tr>\n<td align=\"left\">p_status</td>\n<td align=\"left\">否</td>\n<td align=\"left\">int</td>\n<td align=\"left\">“0/1/2/3/4”, //准备播放，播放,暂停,停止,播放结束(用于网络收音机)</td>\n</tr>\n<tr>\n<td align=\"left\">type</td>\n<td align=\"left\">否</td>\n<td align=\"left\">String</td>\n<td align=\"left\">当前播放源(预设preset),收藏,实时推送</td>\n</tr>\n<tr>\n<td align=\"left\">name</td>\n<td align=\"left\">否</td>\n<td align=\"left\">string</td>\n<td align=\"left\">演唱者</td>\n</tr>\n<tr>\n<td align=\"left\">artist</td>\n<td align=\"left\">否</td>\n<td align=\"left\">String</td>\n<td align=\"left\">艺术家</td>\n</tr>\n<tr>\n<td align=\"left\">album</td>\n<td align=\"left\">否</td>\n<td align=\"left\">String</td>\n<td align=\"left\">专辑</td>\n</tr>\n<tr>\n<td align=\"left\">next_id</td>\n<td align=\"left\">是</td>\n<td align=\"left\">int</td>\n<td align=\"left\">下一首歌曲id</td>\n</tr>\n<tr>\n<td align=\"left\">total_time</td>\n<td align=\"left\">是</td>\n<td align=\"left\">int</td>\n<td align=\"left\">歌曲总时间</td>\n</tr>\n<tr>\n<td align=\"left\">current_time</td>\n<td align=\"left\">是</td>\n<td align=\"left\">int</td>\n<td align=\"left\">歌曲当前播放时间</td>\n</tr>\n<tr>\n<td align=\"left\">play_mode</td>\n<td align=\"left\">否</td>\n<td align=\"left\">int</td>\n<td align=\"left\">模式（//顺序播放/随机播放列表循环/单曲循环/）</td>\n</tr>\n<tr>\n<td align=\"left\">volume</td>\n<td align=\"left\">是</td>\n<td align=\"left\">int</td>\n<td align=\"left\">音量</td>\n</tr>\n</tbody></table>\n<h1 id=\"绑定流程\"><a href=\"#绑定流程\" class=\"headerlink\" title=\"绑定流程\"></a><strong>绑定流程</strong></h1><hr>\n<h2 id=\"title-喜马拉雅WiFi音响绑定及通讯协议初稿date-2016-05-11-22-54-48tags-智能家居-喜马拉雅-Andorid-categories-IoT\"><a href=\"#title-喜马拉雅WiFi音响绑定及通讯协议初稿date-2016-05-11-22-54-48tags-智能家居-喜马拉雅-Andorid-categories-IoT\" class=\"headerlink\" title=\"title: 喜马拉雅WiFi音响绑定及通讯协议初稿date: 2016-05-11 22:54:48tags: [智能家居,喜马拉雅,Andorid]categories:- [IoT]\"></a>title: 喜马拉雅WiFi音响绑定及通讯协议初稿<br>date: 2016-05-11 22:54:48<br>tags: [智能家居,喜马拉雅,Andorid]<br>categories:<br>- [IoT]</h2><p>喜马拉雅WiFi音响绑定及通讯协议初稿</p>\n<!--more-->\n<h1 id=\"通讯协议-1\"><a href=\"#通讯协议-1\" class=\"headerlink\" title=\"通讯协议\"></a><strong>通讯协议</strong></h1><p>|0x5A|数据长度|框架版本|协议类型|设备编码|Mac地址|数据帧序列号|保留字|数据类型|数据内容|检验码FCS|<br>|—-|:—-:|<br>|1字节|2字节|1字节|1字节|8字节|6字节|4字节|8字节|2字节|N字节|2字节|</p>\n<h1 id=\"通讯Json格式：-1\"><a href=\"#通讯Json格式：-1\" class=\"headerlink\" title=\"通讯Json格式：\"></a><strong>通讯Json格式</strong>：</h1><pre><code>{ \n \"cmd\": 0 ,//命令码\n\"code\": 0,\t//返回码\n\"msg\": \"\",\t//状态消息\n\"data\": ......\t//数据节点\n}\n</code></pre>\n<h2 id=\"参数说明-1\"><a href=\"#参数说明-1\" class=\"headerlink\" title=\"参数说明\"></a><strong>参数说明</strong></h2><table>\n<thead>\n<tr>\n<th align=\"left\">参数名称</th>\n<th align=\"left\">是否必须</th>\n<th align=\"left\">字段类型</th>\n<th align=\"left\">参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">cmd</td>\n<td align=\"left\">YES</td>\n<td align=\"left\">int</td>\n<td align=\"left\">命令码</td>\n</tr>\n<tr>\n<td align=\"left\">code</td>\n<td align=\"left\">NO</td>\n<td align=\"left\">int</td>\n<td align=\"left\">返回码</td>\n</tr>\n<tr>\n<td align=\"left\">msg</td>\n<td align=\"left\">NO</td>\n<td align=\"left\">String</td>\n<td align=\"left\">状态消息</td>\n</tr>\n<tr>\n<td align=\"left\">data</td>\n<td align=\"left\">NO</td>\n<td align=\"left\">String</td>\n<td align=\"left\">数据节点</td>\n</tr>\n</tbody></table>\n<h2 id=\"全局命令码-1\"><a href=\"#全局命令码-1\" class=\"headerlink\" title=\"全局命令码\"></a><strong>全局命令码</strong></h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>每一种操作对用一个命令码，用作标识指令。</p></blockquote>\n<h4 id=\"全局命令码说明如下：-1\"><a href=\"#全局命令码说明如下：-1\" class=\"headerlink\" title=\"全局命令码说明如下：\"></a>全局命令码说明如下：</h4><table>\n<thead>\n<tr>\n<th align=\"left\">命令码（十六进制)</th>\n<th align=\"left\">十进制</th>\n<th align=\"left\">说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">0x0001</td>\n<td align=\"left\">1</td>\n<td align=\"left\">添加歌曲</td>\n</tr>\n<tr>\n<td align=\"left\">0x0002</td>\n<td align=\"left\">2</td>\n<td align=\"left\">App查询歌曲列表</td>\n</tr>\n<tr>\n<td align=\"left\">0x0003</td>\n<td align=\"left\">3</td>\n<td align=\"left\">升级操作</td>\n</tr>\n<tr>\n<td align=\"left\">0x0004</td>\n<td align=\"left\">4</td>\n<td align=\"left\">播放</td>\n</tr>\n<tr>\n<td align=\"left\">0x0005</td>\n<td align=\"left\">5</td>\n<td align=\"left\">关机</td>\n</tr>\n<tr>\n<td align=\"left\">0x0006</td>\n<td align=\"left\">6</td>\n<td align=\"left\">静音/解除静音</td>\n</tr>\n<tr>\n<td align=\"left\">0x0007</td>\n<td align=\"left\">7</td>\n<td align=\"left\">音量+</td>\n</tr>\n<tr>\n<td align=\"left\">0x0008</td>\n<td align=\"left\">8</td>\n<td align=\"left\">音量-</td>\n</tr>\n<tr>\n<td align=\"left\">0x0009</td>\n<td align=\"left\">9</td>\n<td align=\"left\">切换aux状态</td>\n</tr>\n<tr>\n<td align=\"left\">0x000a</td>\n<td align=\"left\">10</td>\n<td align=\"left\">下一曲</td>\n</tr>\n<tr>\n<td align=\"left\">0x000b</td>\n<td align=\"left\">11</td>\n<td align=\"left\">上一曲</td>\n</tr>\n<tr>\n<td align=\"left\">0x000c</td>\n<td align=\"left\">12</td>\n<td align=\"left\">暂停</td>\n</tr>\n<tr>\n<td align=\"left\">0x000d</td>\n<td align=\"left\">13</td>\n<td align=\"left\">App查询播放状态</td>\n</tr>\n<tr>\n<td align=\"left\">0x000e</td>\n<td align=\"left\">14</td>\n<td align=\"left\">WIFI 无线简易连接</td>\n</tr>\n<tr>\n<td align=\"left\">0x000f</td>\n<td align=\"left\">15</td>\n<td align=\"left\">设备回复心跳</td>\n</tr>\n<tr>\n<td align=\"left\">0x400f</td>\n<td align=\"left\">16399</td>\n<td align=\"left\">App发送心跳</td>\n</tr>\n<tr>\n<td align=\"left\">0x0011</td>\n<td align=\"left\">17</td>\n<td align=\"left\">palyMode(顺序播放/随机播放/列表循环/单曲循环/)</td>\n</tr>\n<tr>\n<td align=\"left\">0x0012</td>\n<td align=\"left\">18</td>\n<td align=\"left\">音量设置（直接设置音量值）</td>\n</tr>\n<tr>\n<td align=\"left\">0x0013</td>\n<td align=\"left\">19</td>\n<td align=\"left\">设备推送播放状态</td>\n</tr>\n<tr>\n<td align=\"left\">0x0014</td>\n<td align=\"left\">20</td>\n<td align=\"left\">设备推送播放列表</td>\n</tr>\n<tr>\n<td align=\"left\">0x0015</td>\n<td align=\"left\">21</td>\n<td align=\"left\">拖拽进度条</td>\n</tr>\n</tbody></table>\n<h2 id=\"全局返回码-1\"><a href=\"#全局返回码-1\" class=\"headerlink\" title=\"全局返回码\"></a><strong>全局返回码</strong></h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>每次调用接口时，可能获得正确或错误的返回码，可以根据返回码信息调试接口，排查错误。<br>####全局返回码说明如下：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">0</th>\n<th align=\"left\">请求成功</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">200</td>\n<td align=\"left\">无错误</td>\n</tr>\n<tr>\n<td align=\"left\">400</td>\n<td align=\"left\">不支持此接口</td>\n</tr>\n<tr>\n<td align=\"left\">401</td>\n<td align=\"left\">JSON数据解析错误</td>\n</tr>\n</tbody></table></blockquote>\n<h2 id=\"示例-1\"><a href=\"#示例-1\" class=\"headerlink\" title=\"示例\"></a><strong>示例</strong></h2><h3 id=\"字符串-1\"><a href=\"#字符串-1\" class=\"headerlink\" title=\"字符串\"></a><strong>字符串</strong></h3><pre><code>{ \n\"cmd\": 0x0001 ,//命令码\n\"code\": 0,  //返回码\n\"msg\": \"\",  //状态消息\n\"data\": \"This is string\"  //数据节点\n}\n</code></pre>\n<h3 id=\"整形参数-1\"><a href=\"#整形参数-1\" class=\"headerlink\" title=\"整形参数\"></a><strong>整形参数</strong></h3><pre><code>{ \n\"cmd\": 0x0001 ,//命令码\n\"code\": 0,  //返回码\n\"msg\": \"\",  //状态消息\n\"data\": 1  //数据节点\n}\n</code></pre>\n<h3 id=\"对象-1\"><a href=\"#对象-1\" class=\"headerlink\" title=\"对象\"></a><strong>对象</strong></h3><pre><code>{ \n\"cmd\": 0x0001 ,//命令码\n\"code\": 0,  //返回码\n\"msg\": \"\",  //状态消息\n\"data\":  {\n      \"ssid\":\"TP-link\",  //连接的路由名称\n      \"password\":\"12345678\",  //路由密码,需要加密\n  }  \n}\n</code></pre>\n<h3 id=\"数组-1\"><a href=\"#数组-1\" class=\"headerlink\" title=\"数组\"></a><strong>数组</strong></h3><pre><code>{ \n\"cmd\": 0x001 ,//命令码\n\"code\": 0,  //返回码\n\"msg\": \"\",  //状态消息\n\"data\":[\n  {\n        \"id\"      ：   \"0\"\n        \"name\" ： “xxxx\",\n        \"artist\" ： “xxxx\",\n        \"album_title\"： “xxxx\",\n        \"cover_url_small”：“xxxx\",\n        \"cover_url_middle\":\"xxxx\",\n        \"cover_url_large\":\"xxxx\",\n        \"url\":\"xxxxxxxxx\"  {详细规格见规格说明url部分},\n  },\n  {\n        \"id\":\"1\"\n        \"name\":\"xxxx1\",\n        \"artist\":\"xxxx1\",\n        \"album\":\"xxxx1\",\n        \"cover_url_small\":\"xxxx\",\n        \"cover_url_middle\":\"xxxx\",\n        \"cover_url_large\":\"xxxx\",\n        \"url\":\"xxxxxxxxxx\"{详细规格见规格说明url部分},\n  }\n   ]\n}\n</code></pre>\n<h2 id=\"指令说明-1\"><a href=\"#指令说明-1\" class=\"headerlink\" title=\"指令说明\"></a><strong>指令说明</strong></h2><h3 id=\"一、设备基础指令-1\"><a href=\"#一、设备基础指令-1\" class=\"headerlink\" title=\"一、设备基础指令\"></a><strong>一、设备基础指令</strong></h3><ol>\n<li><strong>App扫描设备</strong></li>\n</ol>\n<table>\n<thead>\n<tr>\n<th align=\"left\">0x5A</th>\n<th align=\"left\">数据长度</th>\n<th align=\"left\">框架版本</th>\n<th align=\"left\">协议类型</th>\n<th align=\"left\">设备编码</th>\n<th align=\"left\">Mac地址</th>\n<th align=\"left\">数据帧序列号</th>\n<th align=\"left\">保留字</th>\n<th align=\"left\">数据类型</th>\n<th align=\"left\">数据内容</th>\n<th align=\"left\">检验码FCS</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">5A</td>\n<td align=\"left\">0022</td>\n<td align=\"left\">40</td>\n<td align=\"left\">01</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">000000000000</td>\n<td align=\"left\">20000000</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">0405</td>\n<td align=\"left\">data</td>\n<td align=\"left\">381a</td>\n</tr>\n</tbody></table>\n<ul>\n<li><font color=\"#c00\"><strong>命令字：0x0405</strong></font></li>\n<li><font color=\"#c00\"><strong>data区：NULL</strong></font></li>\n</ul>\n<ol start=\"2\">\n<li><strong>设备回复自身信息</strong></li>\n</ol>\n<table>\n<thead>\n<tr>\n<th align=\"left\">0x5A</th>\n<th align=\"left\">数据长度</th>\n<th align=\"left\">框架版本</th>\n<th align=\"left\">协议类型</th>\n<th align=\"left\">设备编码</th>\n<th align=\"left\">Mac地址</th>\n<th align=\"left\">数据帧序列号</th>\n<th align=\"left\">保留字</th>\n<th align=\"left\">数据类型</th>\n<th align=\"left\">数据内容</th>\n<th align=\"left\">检验码FCS</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">5A</td>\n<td align=\"left\">xxxx</td>\n<td align=\"left\">40</td>\n<td align=\"left\">01</td>\n<td align=\"left\">00000199001b0300</td>\n<td align=\"left\">d8f710e019b0</td>\n<td align=\"left\">00000000</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">0305</td>\n<td align=\"left\">data</td>\n<td align=\"left\">xxxx</td>\n</tr>\n</tbody></table>\n<ul>\n<li><font color=\"#c00\"><strong>命令字：0x0305</strong></font></li>\n<li><font color=\"#c00\"><strong>厂商ID：0x0199</strong> </font></li>\n<li><font color=\"#c00\"><strong>大分类：0x1b</strong>  </font></li>\n<li><font color=\"#c00\"><strong>小分类：0x03</strong></font></li>\n</ul>\n<ol start=\"3\">\n<li><strong>App发送心跳包</strong><table>\n<thead>\n<tr>\n<th align=\"left\">0x5A</th>\n<th align=\"left\">数据长度</th>\n<th align=\"left\">框架版本</th>\n<th align=\"left\">协议类型</th>\n<th align=\"left\">设备编码</th>\n<th align=\"left\">Mac地址</th>\n<th align=\"left\">数据帧序列号</th>\n<th align=\"left\">保留字</th>\n<th align=\"left\">数据类型</th>\n<th align=\"left\">数据内容</th>\n<th align=\"left\">检验码FCS</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">5A</td>\n<td align=\"left\">xxxx</td>\n<td align=\"left\">40</td>\n<td align=\"left\">01</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">000000000000</td>\n<td align=\"left\">20000000</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">0104</td>\n<td align=\"left\">data</td>\n<td align=\"left\">xxxx</td>\n</tr>\n</tbody></table>\n</li>\n</ol>\n<ul>\n<li><font color=\"#c00\"><strong>命令字：0x0104</strong></font></li>\n<li><font color=\"#c00\"><strong>data区：json</strong></font></li>\n</ul>\n<p>示例：</p>\n<pre><code>    { \n     \"cmd\": 0x400f ,//命令码\n    \"code\": 0,\t//返回码\n    \"msg\": \"\",\t//状态消息\n    \"data\": ......\t//数据节点\n    }\n</code></pre>\n<ol start=\"4\">\n<li><strong>设备回复心跳</strong></li>\n</ol>\n<table>\n<thead>\n<tr>\n<th align=\"left\">0x5A</th>\n<th align=\"left\">数据长度</th>\n<th align=\"left\">框架版本</th>\n<th align=\"left\">协议类型</th>\n<th align=\"left\">设备编码</th>\n<th align=\"left\">Mac地址</th>\n<th align=\"left\">数据帧序列号</th>\n<th align=\"left\">保留字</th>\n<th align=\"left\">数据类型</th>\n<th align=\"left\">数据内容</th>\n<th align=\"left\">检验码FCS</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">5A</td>\n<td align=\"left\">xxxx</td>\n<td align=\"left\">40</td>\n<td align=\"left\">01</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">000000000000</td>\n<td align=\"left\">00000000</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">0204</td>\n<td align=\"left\">data</td>\n<td align=\"left\">xxxx</td>\n</tr>\n</tbody></table>\n<ul>\n<li><font color=\"#c00\"> <strong>命令字：0x0204</strong></font> </li>\n<li><font color=\"#c00\"> <strong>data区：json</strong></font></li>\n</ul>\n<p>示例：</p>\n<pre><code>    { \n     \"cmd\": 0x000f ,//命令码\n    \"code\": 0,\t//返回码\n    \"msg\": \"\",\t//状态消息\n    \"data\":  {\n              \"deviceId\": \"SPK设备序列号\"\n          }  \n    }\n</code></pre>\n<h3 id=\"二、App主动控制终端指令-1\"><a href=\"#二、App主动控制终端指令-1\" class=\"headerlink\" title=\"二、App主动控制终端指令\"></a><strong>二、App主动控制终端指令</strong></h3><p><strong>1.App控制终端</strong></p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">0x5A</th>\n<th align=\"left\">数据长度</th>\n<th align=\"left\">框架版本</th>\n<th align=\"left\">协议类型</th>\n<th align=\"left\">设备编码</th>\n<th align=\"left\">Mac地址</th>\n<th align=\"left\">数据帧序列号</th>\n<th align=\"left\">保留字</th>\n<th align=\"left\">数据类型</th>\n<th align=\"left\">数据内容</th>\n<th align=\"left\">检验码FCS</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">5A</td>\n<td align=\"left\">xxxx</td>\n<td align=\"left\">40</td>\n<td align=\"left\">01</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">000000000000</td>\n<td align=\"left\">00000000</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">0104</td>\n<td align=\"left\">data</td>\n<td align=\"left\">xxxx</td>\n</tr>\n</tbody></table>\n<ul>\n<li><font color=\"#c00\"> <strong>命令字：0x0104</strong></font> </li>\n<li><font color=\"#c00\"> <strong>data区：json数据</strong></font></li>\n</ul>\n<p>示例：</p>\n<pre><code>    { \n     \"cmd\": 0x00xx ,//命令码\n    \"code\": 0,\t//返回码\n    \"msg\": \"\",\t//状态消息\n    \"data\": ......\t//数据节点\n    }\n</code></pre>\n<p><strong>2.终端回复App</strong></p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">0x5A</th>\n<th align=\"left\">数据长度</th>\n<th align=\"left\">框架版本</th>\n<th align=\"left\">协议类型</th>\n<th align=\"left\">设备编码</th>\n<th align=\"left\">Mac地址</th>\n<th align=\"left\">数据帧序列号</th>\n<th align=\"left\">保留字</th>\n<th align=\"left\">数据类型</th>\n<th align=\"left\">数据内容</th>\n<th align=\"left\">检验码FCS</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">5A</td>\n<td align=\"left\">xxxx</td>\n<td align=\"left\">40</td>\n<td align=\"left\">01</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">000000000000</td>\n<td align=\"left\">00000000</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">0204</td>\n<td align=\"left\">data</td>\n<td align=\"left\">xxxx</td>\n</tr>\n</tbody></table>\n<ul>\n<li><font color=\"#c00\"> <strong>命令字：0x0204</strong></font> </li>\n<li><font color=\"#c00\"> <strong>data区：json数据</strong></font></li>\n</ul>\n<p>示例：</p>\n<pre><code>    { \n     \"cmd\": 0x00xx ,//命令码\n    \"code\": 0,\t//返回码\n    \"msg\": \"\",\t//状态消息\n    \"data\": ......\t//数据节点\n    }\n</code></pre>\n<h3 id=\"三、终端主动发送控制数据给App-1\"><a href=\"#三、终端主动发送控制数据给App-1\" class=\"headerlink\" title=\"三、终端主动发送控制数据给App\"></a><strong>三、终端主动发送控制数据给App</strong></h3><p><strong>1.周期上传运行数据</strong></p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">0x5A</th>\n<th align=\"left\">数据长度</th>\n<th align=\"left\">框架版本</th>\n<th align=\"left\">协议类型</th>\n<th align=\"left\">设备编码</th>\n<th align=\"left\">Mac地址</th>\n<th align=\"left\">数据帧序列号</th>\n<th align=\"left\">保留字</th>\n<th align=\"left\">数据类型</th>\n<th align=\"left\">数据内容</th>\n<th align=\"left\">检验码FCS</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">5A</td>\n<td align=\"left\">xxxx</td>\n<td align=\"left\">40</td>\n<td align=\"left\">01</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">000000000000</td>\n<td align=\"left\">00000000</td>\n<td align=\"left\">0000000000000000</td>\n<td align=\"left\">0105</td>\n<td align=\"left\">data</td>\n<td align=\"left\">xxxx</td>\n</tr>\n</tbody></table>\n<ul>\n<li><font color=\"#c00\"> <strong>命令字：0x0105</strong></font> </li>\n<li><font color=\"#c00\"> <strong>data区：json数据</strong></font></li>\n</ul>\n<p>示例：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">{ \n\t     \"cmd\": 0x0013 ,//命令码\n\t\t\"code\": 0,\t//返回码\n\t\t\"msg\": \"\",\t//状态消息\n\t\t\"data\": ......\t//数据节点\n}\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n<hr>\n<h1 id=\"音箱数据模型-1\"><a href=\"#音箱数据模型-1\" class=\"headerlink\" title=\"音箱数据模型\"></a><strong>音箱数据模型</strong></h1><h2 id=\"一、歌单-1\"><a href=\"#一、歌单-1\" class=\"headerlink\" title=\"一、歌单\"></a><strong>一、歌单</strong></h2><p><strong>参数说明</strong></p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">参数名称</th>\n<th align=\"left\">是否必须</th>\n<th align=\"left\">字段类型</th>\n<th align=\"left\">参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">id</td>\n<td align=\"left\">是</td>\n<td align=\"left\">int</td>\n<td align=\"left\">歌曲ID</td>\n</tr>\n<tr>\n<td align=\"left\">name</td>\n<td align=\"left\">否</td>\n<td align=\"left\">string</td>\n<td align=\"left\">演唱者</td>\n</tr>\n<tr>\n<td align=\"left\">artist</td>\n<td align=\"left\">否</td>\n<td align=\"left\">String</td>\n<td align=\"left\">艺术家</td>\n</tr>\n<tr>\n<td align=\"left\">album_title</td>\n<td align=\"left\">否</td>\n<td align=\"left\">String</td>\n<td align=\"left\">专辑标题</td>\n</tr>\n<tr>\n<td align=\"left\">lrc_id</td>\n<td align=\"left\">否</td>\n<td align=\"left\">String</td>\n<td align=\"left\">歌词ID</td>\n</tr>\n<tr>\n<td align=\"left\">image_url_small</td>\n<td align=\"left\">否</td>\n<td align=\"left\">String</td>\n<td align=\"left\">歌曲海报1</td>\n</tr>\n<tr>\n<td align=\"left\">image_url_middle</td>\n<td align=\"left\">否</td>\n<td align=\"left\">String</td>\n<td align=\"left\">歌曲海报2</td>\n</tr>\n<tr>\n<td align=\"left\">image_url_large</td>\n<td align=\"left\">否</td>\n<td align=\"left\">String</td>\n<td align=\"left\">歌曲海报3</td>\n</tr>\n<tr>\n<td align=\"left\">mac</td>\n<td align=\"left\">否</td>\n<td align=\"left\">String</td>\n<td align=\"left\">Mac地址</td>\n</tr>\n<tr>\n<td align=\"left\">total_time</td>\n<td align=\"left\">否</td>\n<td align=\"left\">int</td>\n<td align=\"left\">歌曲时长</td>\n</tr>\n<tr>\n<td align=\"left\">album_id</td>\n<td align=\"left\">否</td>\n<td align=\"left\">int</td>\n<td align=\"left\">专辑ID</td>\n</tr>\n<tr>\n<td align=\"left\">utype</td>\n<td align=\"left\">否</td>\n<td align=\"left\">int</td>\n<td align=\"left\">比如 虾米音乐 考虑 喜马拉雅 之类的</td>\n</tr>\n<tr>\n<td align=\"left\">uri</td>\n<td align=\"left\">是</td>\n<td align=\"left\">int</td>\n<td align=\"left\">歌曲URL</td>\n</tr>\n<tr>\n<td align=\"left\">downloadurl</td>\n<td align=\"left\">是</td>\n<td align=\"left\">String</td>\n<td align=\"left\">下载url</td>\n</tr>\n</tbody></table>\n<h2 id=\"二、播放状态-1\"><a href=\"#二、播放状态-1\" class=\"headerlink\" title=\"二、播放状态\"></a><strong>二、播放状态</strong></h2><p><strong>参数说明</strong></p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">参数名称</th>\n<th align=\"left\">是否必须</th>\n<th align=\"left\">字段类型</th>\n<th align=\"left\">参数说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">id\t是</td>\n<td align=\"left\">int</td>\n<td align=\"left\">歌曲ID</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">mtype</td>\n<td align=\"left\">是</td>\n<td align=\"left\">String</td>\n<td align=\"left\">虾米，百度云盘，本地音乐…</td>\n</tr>\n<tr>\n<td align=\"left\">p_status</td>\n<td align=\"left\">否</td>\n<td align=\"left\">int</td>\n<td align=\"left\">“0/1/2/3/4”, //准备播放，播放,暂停,停止,播放结束(用于网络收音机)</td>\n</tr>\n<tr>\n<td align=\"left\">type</td>\n<td align=\"left\">否</td>\n<td align=\"left\">String</td>\n<td align=\"left\">当前播放源(预设preset),收藏,实时推送</td>\n</tr>\n<tr>\n<td align=\"left\">name</td>\n<td align=\"left\">否</td>\n<td align=\"left\">string</td>\n<td align=\"left\">演唱者</td>\n</tr>\n<tr>\n<td align=\"left\">artist</td>\n<td align=\"left\">否</td>\n<td align=\"left\">String</td>\n<td align=\"left\">艺术家</td>\n</tr>\n<tr>\n<td align=\"left\">album</td>\n<td align=\"left\">否</td>\n<td align=\"left\">String</td>\n<td align=\"left\">专辑</td>\n</tr>\n<tr>\n<td align=\"left\">next_id</td>\n<td align=\"left\">是</td>\n<td align=\"left\">int</td>\n<td align=\"left\">下一首歌曲id</td>\n</tr>\n<tr>\n<td align=\"left\">total_time</td>\n<td align=\"left\">是</td>\n<td align=\"left\">int</td>\n<td align=\"left\">歌曲总时间</td>\n</tr>\n<tr>\n<td align=\"left\">current_time</td>\n<td align=\"left\">是</td>\n<td align=\"left\">int</td>\n<td align=\"left\">歌曲当前播放时间</td>\n</tr>\n<tr>\n<td align=\"left\">play_mode</td>\n<td align=\"left\">否</td>\n<td align=\"left\">int</td>\n<td align=\"left\">模式（//顺序播放/随机播放列表循环/单曲循环/）</td>\n</tr>\n<tr>\n<td align=\"left\">volume</td>\n<td align=\"left\">是</td>\n<td align=\"left\">int</td>\n<td align=\"left\">音量</td>\n</tr>\n</tbody></table>\n<h1 id=\"绑定流程-1\"><a href=\"#绑定流程-1\" class=\"headerlink\" title=\"绑定流程\"></a><strong>绑定流程</strong></h1><img src=\"/post/ximalaya/bind.jpg\" class=\"\" title=\"这里写图片描述\">\n<p><em><strong><a href=\"ximalaya/bind.jpg\">点击看大图</a></strong></em></p>\n<p><a href=\"http://blog.csdn.net/xxl6097/article/details/50127949\"><strong>[原文链接地址]http://blog.csdn.net/xxl6097/article/details/50127949</strong></a></p>\n<p><a href=\"http://blog.csdn.net/xxl6097/article/details/50127949\"><strong>[原文链接地址]http://blog.csdn.net/xxl6097/article/details/50127949</strong></a></p>\n","text":"喜马拉雅WiFi音响绑定及通讯协议初稿 通讯协议 0x5A 数据长度 框架版本 协议类型 设备编码 Mac地址 数据帧序列号 保留字 数据类型 数据内容 检验码FCS 1字节 2字节 1字节 1字节 8字节 6字节 4字节 8字节 2字节 N字节 2字节 通讯Json格式：{ \"...","link":"","photos":[],"count_time":{"symbolsCount":"9.5k","symbolsTime":"9 mins."},"categories":[{"name":"IoT","slug":"IoT","count":4,"path":"api/categories/IoT.json"}],"tags":[{"name":"Andorid","slug":"Andorid","count":2,"path":"api/tags/Andorid.json"},{"name":"智能家居","slug":"智能家居","count":2,"path":"api/tags/智能家居.json"},{"name":"喜马拉雅","slug":"喜马拉雅","count":1,"path":"api/tags/喜马拉雅.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E9%80%9A%E8%AE%AF%E5%8D%8F%E8%AE%AE\"><span class=\"toc-text\">通讯协议</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E9%80%9A%E8%AE%AFJson%E6%A0%BC%E5%BC%8F%EF%BC%9A\"><span class=\"toc-text\">通讯Json格式：</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E\"><span class=\"toc-text\">参数说明</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%A8%E5%B1%80%E5%91%BD%E4%BB%A4%E7%A0%81\"><span class=\"toc-text\">全局命令码</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%85%A8%E5%B1%80%E5%91%BD%E4%BB%A4%E7%A0%81%E8%AF%B4%E6%98%8E%E5%A6%82%E4%B8%8B%EF%BC%9A\"><span class=\"toc-text\">全局命令码说明如下：</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%A8%E5%B1%80%E8%BF%94%E5%9B%9E%E7%A0%81\"><span class=\"toc-text\">全局返回码</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%A4%BA%E4%BE%8B\"><span class=\"toc-text\">示例</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AD%97%E7%AC%A6%E4%B8%B2\"><span class=\"toc-text\">字符串</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%95%B4%E5%BD%A2%E5%8F%82%E6%95%B0\"><span class=\"toc-text\">整形参数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AF%B9%E8%B1%A1\"><span class=\"toc-text\">对象</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%95%B0%E7%BB%84\"><span class=\"toc-text\">数组</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%8C%87%E4%BB%A4%E8%AF%B4%E6%98%8E\"><span class=\"toc-text\">指令说明</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%80%E3%80%81%E8%AE%BE%E5%A4%87%E5%9F%BA%E7%A1%80%E6%8C%87%E4%BB%A4\"><span class=\"toc-text\">一、设备基础指令</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BA%8C%E3%80%81App%E4%B8%BB%E5%8A%A8%E6%8E%A7%E5%88%B6%E7%BB%88%E7%AB%AF%E6%8C%87%E4%BB%A4\"><span class=\"toc-text\">二、App主动控制终端指令</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%89%E3%80%81%E7%BB%88%E7%AB%AF%E4%B8%BB%E5%8A%A8%E5%8F%91%E9%80%81%E6%8E%A7%E5%88%B6%E6%95%B0%E6%8D%AE%E7%BB%99App\"><span class=\"toc-text\">三、终端主动发送控制数据给App</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E9%9F%B3%E7%AE%B1%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B\"><span class=\"toc-text\">音箱数据模型</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%80%E3%80%81%E6%AD%8C%E5%8D%95\"><span class=\"toc-text\">一、歌单</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%8C%E3%80%81%E6%92%AD%E6%94%BE%E7%8A%B6%E6%80%81\"><span class=\"toc-text\">二、播放状态</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E7%BB%91%E5%AE%9A%E6%B5%81%E7%A8%8B\"><span class=\"toc-text\">绑定流程</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#title-%E5%96%9C%E9%A9%AC%E6%8B%89%E9%9B%85WiFi%E9%9F%B3%E5%93%8D%E7%BB%91%E5%AE%9A%E5%8F%8A%E9%80%9A%E8%AE%AF%E5%8D%8F%E8%AE%AE%E5%88%9D%E7%A8%BFdate-2016-05-11-22-54-48tags-%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85-%E5%96%9C%E9%A9%AC%E6%8B%89%E9%9B%85-Andorid-categories-IoT\"><span class=\"toc-text\">title: 喜马拉雅WiFi音响绑定及通讯协议初稿date: 2016-05-11 22:54:48tags: [智能家居,喜马拉雅,Andorid]categories:- [IoT]</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E9%80%9A%E8%AE%AF%E5%8D%8F%E8%AE%AE-1\"><span class=\"toc-text\">通讯协议</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E9%80%9A%E8%AE%AFJson%E6%A0%BC%E5%BC%8F%EF%BC%9A-1\"><span class=\"toc-text\">通讯Json格式：</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E-1\"><span class=\"toc-text\">参数说明</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%A8%E5%B1%80%E5%91%BD%E4%BB%A4%E7%A0%81-1\"><span class=\"toc-text\">全局命令码</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%85%A8%E5%B1%80%E5%91%BD%E4%BB%A4%E7%A0%81%E8%AF%B4%E6%98%8E%E5%A6%82%E4%B8%8B%EF%BC%9A-1\"><span class=\"toc-text\">全局命令码说明如下：</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%A8%E5%B1%80%E8%BF%94%E5%9B%9E%E7%A0%81-1\"><span class=\"toc-text\">全局返回码</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%A4%BA%E4%BE%8B-1\"><span class=\"toc-text\">示例</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AD%97%E7%AC%A6%E4%B8%B2-1\"><span class=\"toc-text\">字符串</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%95%B4%E5%BD%A2%E5%8F%82%E6%95%B0-1\"><span class=\"toc-text\">整形参数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AF%B9%E8%B1%A1-1\"><span class=\"toc-text\">对象</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%95%B0%E7%BB%84-1\"><span class=\"toc-text\">数组</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%8C%87%E4%BB%A4%E8%AF%B4%E6%98%8E-1\"><span class=\"toc-text\">指令说明</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%80%E3%80%81%E8%AE%BE%E5%A4%87%E5%9F%BA%E7%A1%80%E6%8C%87%E4%BB%A4-1\"><span class=\"toc-text\">一、设备基础指令</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BA%8C%E3%80%81App%E4%B8%BB%E5%8A%A8%E6%8E%A7%E5%88%B6%E7%BB%88%E7%AB%AF%E6%8C%87%E4%BB%A4-1\"><span class=\"toc-text\">二、App主动控制终端指令</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%89%E3%80%81%E7%BB%88%E7%AB%AF%E4%B8%BB%E5%8A%A8%E5%8F%91%E9%80%81%E6%8E%A7%E5%88%B6%E6%95%B0%E6%8D%AE%E7%BB%99App-1\"><span class=\"toc-text\">三、终端主动发送控制数据给App</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E9%9F%B3%E7%AE%B1%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B-1\"><span class=\"toc-text\">音箱数据模型</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%80%E3%80%81%E6%AD%8C%E5%8D%95-1\"><span class=\"toc-text\">一、歌单</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BA%8C%E3%80%81%E6%92%AD%E6%94%BE%E7%8A%B6%E6%80%81-1\"><span class=\"toc-text\">二、播放状态</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E7%BB%91%E5%AE%9A%E6%B5%81%E7%A8%8B-1\"><span class=\"toc-text\">绑定流程</span></a></li></ol>","author":{"name":"uuxia","slug":"blog-author","avatar":"/medias/avatar.jpg","link":"/","description":"一位正在重塑知识的技术人 <br /> @ <b>欢迎光临!@</b>","socials":{"github":"https://github.com/xxl6097","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"baidu":{"icon":"/img/baidu.jpg","link":"https://www.baidu.com/my/index"}}}},"mapped":true,"prev_post":{"title":"Android导入第三方静态库.a编译成动态库.so","uid":"8213f481efc903643779a1a7fd956892","slug":"android-ndk-so-a","date":"2016-05-11T15:08:51.000Z","updated":"2022-06-15T07:49:16.352Z","comments":true,"path":"api/articles/android-ndk-so-a.json","cover":[],"text":"Android导入第三方静态库.a编译成动态库.so 下面我以一个简单的实际例子来讲解如何在动态库中导入静态库。 静态库中的源代码有两个文件：static.h, static.c，有一个add方法 static.h #include &lt;stdio.h&gt; int add...","link":"","photos":[],"count_time":{"symbolsCount":"1.5k","symbolsTime":"1 mins."},"categories":[{"name":"Android","slug":"Android","count":3,"path":"api/categories/Android.json"}],"tags":[{"name":"Andorid","slug":"Andorid","count":2,"path":"api/tags/Andorid.json"},{"name":"ndk","slug":"ndk","count":2,"path":"api/tags/ndk.json"},{"name":"so","slug":"so","count":1,"path":"api/tags/so.json"},{"name":"a","slug":"a","count":1,"path":"api/tags/a.json"}],"author":{"name":"uuxia","slug":"blog-author","avatar":"/medias/avatar.jpg","link":"/","description":"一位正在重塑知识的技术人 <br /> @ <b>欢迎光临!@</b>","socials":{"github":"https://github.com/xxl6097","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"baidu":{"icon":"/img/baidu.jpg","link":"https://www.baidu.com/my/index"}}}}},"next_post":{"title":"绑定界面动资源画动态替换","uid":"facfeaeeff317a7e3563decfd5c43a5a","slug":"public-bind","date":"2016-05-10T22:35:25.000Z","updated":"2022-02-18T10:17:38.000Z","comments":true,"path":"api/articles/public-bind.json","cover":[],"text":"由于公共模块绑定满足不了TOB项目以及其他项目特殊需求，现对公共模块绑定界面的资源做成可配置，本文介绍一下哪些资源可配置以及如何配置。 颜色配置 颜色的配置需要在res/values，res/values-v14，res/values-v19，res/values-v21等目录下...","link":"","photos":[],"count_time":{"symbolsCount":"5.3k","symbolsTime":"5 mins."},"categories":[{"name":"IoT","slug":"IoT","count":4,"path":"api/categories/IoT.json"}],"tags":[{"name":"het","slug":"het","count":1,"path":"api/tags/het.json"},{"name":"智能家居","slug":"智能家居","count":2,"path":"api/tags/智能家居.json"}],"author":{"name":"uuxia","slug":"blog-author","avatar":"/medias/avatar.jpg","link":"/","description":"一位正在重塑知识的技术人 <br /> @ <b>欢迎光临!@</b>","socials":{"github":"https://github.com/xxl6097","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"baidu":{"icon":"/img/baidu.jpg","link":"https://www.baidu.com/my/index"}}}}}}